import{r as m,j as e}from"./ui-Ps9nvBG1.js";import{u as W,m as N,C as P,a as B,b as _,D as q,an as Z,B as r,P as ee,l as A,n as T,o as $,e as k,I as ae,d as H,R as se,X as te,t as h,g as ne}from"./app-BTt_gkO3.js";import{T as re,a as le,b as E,c as o,d as oe,e as c}from"./table-CxFq10cW.js";import{T as ce}from"./textarea-DPiv_-Qc.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";function fe({userType:l,payoutRequests:Y,settings:t,stats:n}){var y,C,b,g,R;const{t:a}=W(),[z,u]=m.useState(!1),[F,i]=m.useState(!1),[x,j]=m.useState(null),{data:I,setData:L,post:p,processing:M,errors:f,reset:O}=N({amount:""}),{data:U,setData:v,post:X,processing:G}=N({notes:""}),J=s=>{s.preventDefault(),p(route("referral.payout-request.create"),{onSuccess:()=>{u(!1),O(),h.success(a("Payout request submitted successfully"))}})},K=s=>{p(route("referral.payout-request.approve",s.id),{onSuccess:()=>{h.success(a("Payout request approved"))}})},Q=s=>{s.preventDefault(),x&&X(route("referral.payout-request.reject",x.id),{onSuccess:()=>{i(!1),j(null),v("notes",""),h.success(a("Payout request rejected"))}})},V=s=>{const d={pending:"default",approved:"success",rejected:"destructive"};return e.jsx(ne,{variant:d[s]||"default",children:a(s.charAt(0).toUpperCase()+s.slice(1))})};return e.jsxs("div",{className:"space-y-6",children:[l==="company"&&e.jsxs(P,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between",children:[e.jsx(_,{children:a("Create Payout Request")}),e.jsxs(q,{open:z,onOpenChange:u,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(r,{disabled:n.availableBalance<t.threshold_amount,children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),a("Request Payout")]})}),e.jsxs(A,{children:[e.jsx(T,{children:e.jsx($,{children:a("Create Payout Request")})}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"amount",children:a("Amount")}),e.jsx(ae,{id:"amount",type:"number",step:"0.01",min:t.threshold_amount,max:n.availableBalance,value:I.amount,onChange:s=>L("amount",s.target.value),placeholder:`Min: ${t.threshold_amount}`}),f.amount&&e.jsx("p",{className:"text-sm text-red-500",children:f.amount})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:[a("Available Balance"),": ",((y=window.appSettings)==null?void 0:y.formatCurrency(n.availableBalance))||`${n.availableBalance}`]}),e.jsxs("p",{children:[a("Minimum Amount"),": ",((C=window.appSettings)==null?void 0:C.formatCurrency(t.threshold_amount))||`${t.threshold_amount}`]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>u(!1),children:a("Cancel")}),e.jsx(r,{type:"submit",disabled:M,children:a("Submit Request")})]})]})]})]})]}),e.jsx(H,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:n.availableBalance<t.threshold_amount?a("You need at least {{amount}} to request a payout",{amount:((b=window.appSettings)==null?void 0:b.formatCurrency(t.threshold_amount))||`${t.threshold_amount}`}):a("You can request up to {{amount}} for payout",{amount:((g=window.appSettings)==null?void 0:g.formatCurrency(n.availableBalance))||`${n.availableBalance}`})})})]}),e.jsxs(P,{children:[e.jsx(B,{children:e.jsx(_,{children:a(l==="superadmin"?"All Payout Requests":"Your Payout Requests")})}),e.jsx(H,{children:e.jsxs(re,{children:[e.jsx(le,{children:e.jsxs(E,{children:[l==="superadmin"&&e.jsx(o,{children:a("Company")}),e.jsx(o,{children:a("Amount")}),e.jsx(o,{children:a("Status")}),e.jsx(o,{children:a("Date")}),l==="superadmin"&&e.jsx(o,{children:a("Actions")})]})}),e.jsx(oe,{children:(R=Y.data)==null?void 0:R.map(s=>{var d,w,S,D;return e.jsxs(E,{children:[l==="superadmin"&&e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(d=s.company)==null?void 0:d.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(w=s.company)==null?void 0:w.email})]})}),e.jsx(c,{children:((S=window.appSettings)==null?void 0:S.formatCurrency(s.amount))||`${s.amount}`}),e.jsx(c,{children:V(s.status)}),e.jsx(c,{children:((D=window.appSettings)==null?void 0:D.formatDateTime(s.created_at,!1))||new Date(s.created_at).toLocaleDateString()}),l==="superadmin"&&s.status==="pending"&&e.jsx(c,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>K(s),children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),a("Approve")]}),e.jsxs(r,{size:"sm",variant:"outline",onClick:()=>{j(s),i(!0)},children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),a("Reject")]})]})})]},s.id)})})]})})]}),e.jsx(q,{open:F,onOpenChange:i,children:e.jsxs(A,{children:[e.jsx(T,{children:e.jsx($,{children:a("Reject Payout Request")})}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(k,{htmlFor:"notes",children:a("Rejection Reason")}),e.jsx(ce,{id:"notes",value:U.notes,onChange:s=>v("notes",s.target.value),placeholder:a("Enter reason for rejection...")})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>i(!1),children:a("Cancel")}),e.jsx(r,{type:"submit",variant:"destructive",disabled:G,children:a("Reject Request")})]})]})]})})]})}export{fe as default};
