import{j as e,r as y}from"./ui-Ps9nvBG1.js";import{B as m,u as Os,K as Gs,h as g,f as o,g as N,C as n,d,i as ee,j as se,t as f,k as te,a as k,b as T,P as A,S as ae,I as Ce,ah as hs,M as Vs}from"./app-BTt_gkO3.js";import{f as Zs,R as js,P as Ws,A as G,c as re,a as V}from"./page-template-BeQadk1c.js";import{P as he}from"./progress-B213Sqsa.js";import{T as Qs,a as Ys,b as M,c as z}from"./tabs-D83PhGuv.js";import{S as Pe,a as ke,b as Te,c as Ae,d as D}from"./select-z0EzYxFC.js";import{C as Ks}from"./CrudFormModal-CIUswiAq.js";import{E as Js}from"./EnhancedDeleteModal-BUN-gSW9.js";import{C as Xs}from"./chevron-left-BAvb6WGn.js";import{f as ps,i as gs,g as et,a as st}from"./timesheetUtils-B5XLnIH8.js";import{f as U}from"./currency-kzm_C5pv.js";import{T as tt}from"./TimesheetFormModal-Cbd3LuxE.js";import{S as Z}from"./square-check-big-B29hCoNu.js";import{B as je}from"./bug-DP5pb0Nw.js";import{D as W}from"./dollar-sign-CY6xo33T.js";import{S as De}from"./square-pen-BE6Ef4zh.js";import{U as le}from"./users-ClK0ij4u.js";import{C as pe}from"./calendar-pZCS8WPy.js";import{C as ie}from"./clock-NAV_RQL_.js";import{C as us}from"./chart-column-CH-40Yjn.js";import{U as Ns}from"./user-DZ3jVi18.js";import{P as ge}from"./pin-z3kXVgm0.js";import{C as Me}from"./credit-card-BwPrmecT.js";import{T as de}from"./timer-Cde2YpCK.js";import{P as ze}from"./paperclip-h_SfHoPk.js";import{T as ce}from"./trash-2-WsAE_ige.js";import{E as me}from"./eye-BGcEqodV.js";import{C as oe}from"./circle-check-big-BMYVPbRH.js";import{T as Fe}from"./triangle-alert-BuDHDWvi.js";import{D as at}from"./download-FY3rJJBK.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./textarea-DPiv_-Qc.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./chevron-up-CaRG6751.js";import"./building-2-CVOsE0mA.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./use-favicon-vjALIuby.js";import"./index-C9qibMqK.js";import"./radio-group-JdhkNCQh.js";import"./circle-B-lwSO-9.js";import"./checkbox-ux8-2I9a.js";import"./scroll-area-B8km6OEG.js";function rt({currentPage:w,totalPages:Q,onPageChange:t}){return Q<=1?null:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>t(w-1),disabled:w<=1,children:[e.jsx(Xs,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",w," of ",Q]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>t(w+1),disabled:w>=Q,children:["Next",e.jsx(Zs,{className:"h-4 w-4"})]})]})}function da(){var He,$e,Oe,Ge,Ve,Ze,We,Qe,Ye,Ke,Je,Xe,es,ss,ts,as,rs,ls,is,cs,ns,ds,ms,os,xs;const{t:w}=Os(),{auth:Q,project:t,budget:x=null,members:Be,managers:Ee,clients:Ue,projectTasks:I=[],projectBugs:q=[],projectTimesheets:v=[],canDeleteProject:lt,canViewBudget:Ie,attachmentFilters:Y={},noteFilters:K={},activityFilters:J={}}=Gs().props,p=(Q==null?void 0:Q.permissions)||[],bs=g(p,"project_update"),_=g(p,"project_assign_members")||g(p,"project_assign_clients")||g(p,"project_manage_notes"),vs=g(p,"project_manage_budget");g(p,"project_manage_attachments"),g(p,"project_manage_notes"),g(p,"project_track_progress");const[fs,ys]=y.useState("overview"),[ws,P]=y.useState(!1),[_s,O]=y.useState(!1),[j,L]=y.useState(null),[R,H]=y.useState("create"),[b,S]=y.useState("milestone"),[Ss,qe]=y.useState(!1),[ue,Ne]=y.useState(""),[it,X]=y.useState(!1),[be,Le]=y.useState(1),[ct,Cs]=y.useState(1),[nt,Ps]=y.useState(1),[F,ve]=y.useState((Y==null?void 0:Y.attachment_search)||""),[fe,ks]=y.useState((Y==null?void 0:Y.attachments_per_page)||12),[B,ye]=y.useState((K==null?void 0:K.notes_search)||""),[we,Ts]=y.useState((K==null?void 0:K.notes_per_page)||5),[$,_e]=y.useState((J==null?void 0:J.activity_search)||""),[Se,As]=y.useState((J==null?void 0:J.activity_per_page)||10),xe=5,Ds=s=>{ys(s),s==="milestones"&&Le(1),s==="notes"&&Cs(1),s==="activity"&&Ps(1)},Ms=()=>{const s={attachments_page:1};F&&(s.attachment_search=F),fe!==12&&(s.attachments_per_page=fe),o.get(route("projects.show",t.id),s,{preserveState:!0,preserveScroll:!0,only:["project","attachmentFilters"]})},zs=s=>{const a=parseInt(s);ks(a);const r={attachments_page:1,attachments_per_page:a};F&&(r.attachment_search=F),o.get(route("projects.show",t.id),r,{preserveState:!0,preserveScroll:!0,only:["project","attachmentFilters"]})},Fs=()=>{const s={notes_page:1};B&&(s.notes_search=B),we!==5&&(s.notes_per_page=we),o.get(route("projects.show",t.id),s,{preserveState:!0,preserveScroll:!0,only:["project","noteFilters"]})},Bs=s=>{const a=parseInt(s);Ts(a);const r={notes_page:1,notes_per_page:a};B&&(r.notes_search=B),o.get(route("projects.show",t.id),r,{preserveState:!0,preserveScroll:!0,only:["project","noteFilters"]})},Es=()=>{const s={activity_page:1};$&&(s.activity_search=$),Se!==10&&(s.activity_per_page=Se),o.get(route("projects.show",t.id),s,{preserveState:!0,preserveScroll:!0,only:["project","activityFilters"]})},Us=s=>{const a=parseInt(s);As(a);const r={activity_page:1,activity_per_page:a};$&&(r.activity_search=$),o.get(route("projects.show",t.id),r,{preserveState:!0,preserveScroll:!0,only:["project","activityFilters"]})},Is=s=>({planning:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",on_hold:"bg-yellow-100 text-yellow-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",qs=s=>({low:"bg-green-100 text-green-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",C=(s,a=null,r="")=>{switch(L(a),s){case"add-milestone":S("milestone"),H("create"),P(!0);break;case"edit-milestone":S("milestone"),H("edit"),P(!0);break;case"delete-milestone":O(!0);break;case"add-note":S("note"),H("create"),P(!0);break;case"edit-note":S("note"),H("edit"),P(!0);break;case"delete-note":O(!0);break;case"invite-client":S("client"),H("create"),P(!0);break;case"invite-member":S("member"),H("create"),P(!0);break;case"invite-manager":S("manager"),H("create"),P(!0);break;case"toggle-pin":o.put(route("project-notes.toggle-pin",[t.id,a.id]));break;case"add-attachment":L({media_ids:[]}),S("attachment"),H("create"),P(!0);break;case"delete-attachment":O(!0);break}},Ls=s=>{let a="",r=[];switch(b){case"milestone":a=R==="create"?"project-milestones.store":"project-milestones.update",r=R==="create"?[t.id]:[t.id,j.id];break;case"note":a=R==="create"?"project-notes.store":"project-notes.update",r=R==="create"?[t.id]:[t.id,j.id];break;case"client":a="projects.assign-clients",r=[t.id];break;case"member":a="projects.assign-members",r=[t.id];break;case"manager":a="projects.assign-managers",r=[t.id];break;case"project":a="projects.update",r=[t.id];break;case"budget":a="projects.create-budget",r=[t.id];break;case"attachment":const c=s.media_ids||(j==null?void 0:j.media_ids)||[];if(c&&c.length>0){X(!0),o.post(route("project-attachments.store",t.id),{media_ids:c},{onSuccess:()=>{P(!1),Ne(""),L(null),X(!1),f.success("Attachments uploaded successfully")},onError:h=>{X(!1),f.error(`Failed: ${Object.values(h).join(", ")}`)}});return}if(ue){const h=ue.split(",").map(u=>{const E=u.trim().match(/\/media\/(\d+)/);return E?parseInt(E[1]):null}).filter(Boolean);if(h.length>0){X(!0),o.post(route("project-attachments.store",t.id),{media_ids:h},{onSuccess:()=>{P(!1),Ne(""),L(null),X(!1),f.success("Attachments uploaded successfully")},onError:u=>{X(!1),f.error(`Failed: ${Object.values(u).join(", ")}`)}});return}}f.error("Please select attachments to upload");return}if(b==="attachment")return;const i=R==="create"?"post":"put";f.loading(`${R==="create"?"Creating":"Updating"}...`);const l=r.length===2?route(a,b==="milestone"?{project:r[0],milestone:r[1]}:{project:r[0],note:r[1]}):route(a,r[0]);o[i](l,s,{onSuccess:()=>{P(!1),f.dismiss(),f.success(`${b} ${R==="create"?"created":"updated"} successfully`)},onError:c=>{f.dismiss(),f.error(`Failed: ${Object.values(c).join(", ")}`)}})},Rs=()=>{var r;let s="",a=[];switch(b){case"milestone":s="project-milestones.destroy",a=[t.id,j.id];break;case"note":s="project-notes.destroy",a=[t.id,j.id];break;case"attachment":s="project-attachments.destroy",a=[j.id];break;case"member":s="projects.remove-member",a=[t.id,((r=j.user)==null?void 0:r.id)||j.id];break;case"client":s="projects.remove-client",a=[t.id,j.id];break;default:return}f.loading("Removing..."),o.delete(route(s,a),{onSuccess:()=>{O(!1),f.dismiss(),f.success(`${b==="member"?"Team member":b} removed successfully`)},onError:i=>{f.dismiss(),f.error(`Failed to remove: ${Object.values(i).join(", ")}`)}})},Hs=()=>{switch(b){case"milestone":return{fields:[{name:"title",label:"Title",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"due_date",label:"Due Date",type:"date"},{name:"status",label:"Status",type:"select",options:[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"overdue",label:"Overdue"}],required:!0}],modalSize:"lg"};case"note":return{fields:[{name:"title",label:"Title",type:"text",required:!0},{name:"content",label:"Content",type:"textarea",required:!0},{name:"is_pinned",label:"Pin this note",type:"checkbox"}],modalSize:"lg"};case"client":return{fields:[{name:"client_ids",label:"Add Clients",type:"multi-select",options:(Ue?Ue.filter(i=>{var l;return!((l=t.clients)!=null&&l.some(c=>c.id===i.id))}):[]).map(i=>({value:i.id.toString(),label:`${i.name} (${i.email})`})),placeholder:"Select clients...",required:!0}],modalSize:"xl"};case"member":return{fields:[{name:"member_ids",label:"Add Members",type:"multi-select",options:(Be?Be.filter(i=>{var h,u;const l=(h=t.members)==null?void 0:h.some(E=>{var ne;return((ne=E.user)==null?void 0:ne.id)===i.id}),c=(u=t.clients)==null?void 0:u.some(E=>E.id===i.id);return!l&&!c}):[]).map(i=>({value:i.id.toString(),label:`${i.name} (${i.email})`})),placeholder:"Select members...",required:!0}],modalSize:"xl"};case"manager":return{fields:[{name:"manager_ids",label:"Add Managers",type:"multi-select",options:(Ee?Ee.filter(i=>{var h,u;const l=(h=t.members)==null?void 0:h.some(E=>{var ne;return((ne=E.user)==null?void 0:ne.id)===i.id}),c=(u=t.clients)==null?void 0:u.some(E=>E.id===i.id);return!l&&!c}):[]).map(i=>({value:i.id.toString(),label:`${i.name} (${i.email})`})),placeholder:"Select managers...",required:!0}],modalSize:"xl"};case"project":return{fields:[{name:"title",label:"Project Title",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"status",label:"Status",type:"select",options:[{value:"planning",label:"Planning"},{value:"active",label:"Active"},{value:"on_hold",label:"On Hold"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],required:!0},{name:"priority",label:"Priority",type:"select",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],required:!0},{name:"start_date",label:"Start Date",type:"date"},{name:"deadline",label:"Deadline",type:"date"},{name:"estimated_hours",label:"Estimated Hours",type:"number",min:0},{name:"is_public",label:"Make project public",type:"checkbox"}],modalSize:"xl"};case"budget":return{fields:[{name:"total_budget",label:"Total Budget",type:"number",required:!0,min:0},{name:"currency",label:"Currency",type:"select",options:[{value:"USD",label:"USD"},{value:"EUR",label:"EUR"},{value:"GBP",label:"GBP"}],required:!0},{name:"period_type",label:"Period Type",type:"select",options:[{value:"project",label:"Project Duration"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"}],required:!0},{name:"start_date",label:"Start Date",type:"date",required:!0},{name:"end_date",label:"End Date",type:"date"},{name:"description",label:"Description",type:"textarea"},{name:"categories",label:"Budget Categories",type:"dynamic-list",fields:[{name:"name",label:"Category Name",type:"text",required:!0},{name:"allocated_amount",label:"Allocated Amount",type:"number",required:!0,min:0},{name:"color",label:"Color",type:"color",defaultValue:"#3B82F6"},{name:"description",label:"Description",type:"text"}],required:!0,minItems:1}],modalSize:"xl"};case"attachment":return{fields:[{name:"media_ids",type:"custom",component:e.jsx(Vs,{label:"Select Files",value:ue,onChange:(i,l)=>{Ne(i),l&&l.length>0&&L(c=>({...c,media_ids:l}))},multiple:!0,placeholder:"Select files to upload...",showPreview:!0}),required:!0}],modalSize:"lg"};default:return{fields:[],modalSize:"md"}}},Re=[{label:w("Tasks"),icon:e.jsx(Z,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>o.get(route("tasks.index",{project_id:t.id,project_name:t.title,view:"kanban"}))},{label:w("Bugs"),icon:e.jsx(je,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>o.get(route("bugs.index",{project_id:t.id,project_name:t.title}))},{label:w("Expenses"),icon:e.jsx(js,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>o.get(route("expenses.index",{project_id:t.id,project_name:t.title}))},...Ie?[{label:w("Budget"),icon:e.jsx(W,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>{x?o.get(route("budgets.show",x.id)):o.get(route("budgets.index"))}}]:[]];bs&&Re.push({label:w("Edit Project"),icon:e.jsx(De,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>{L(t),S("project"),H("edit"),P(!0)}});const $s=[{title:w("Dashboard"),href:route("dashboard")},{title:w("Projects"),href:route("projects.index")},{title:t.title}];return e.jsxs(Ws,{title:t.title,url:`/projects/${t.id}`,actions:Re,breadcrumbs:$s,noPadding:!0,children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{className:Is(t.status),children:t.status.replace("_"," ")}),e.jsx(N,{className:qs(t.priority),children:t.priority}),t.is_public?e.jsx(N,{variant:"outline",className:"text-green-600 border-green-600",children:w("Public Project")}):e.jsx(N,{variant:"outline",className:"text-gray-600 border-gray-600",children:w("Private Project")})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Team Members"})]}),e.jsx("p",{className:"text-2xl font-bold",children:((He=t.members)==null?void 0:He.length)||0})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Deadline"})]}),e.jsx("p",{className:"text-lg font-semibold",children:new Date(t.deadline).toLocaleDateString()})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Budget"})]}),e.jsx("p",{className:"text-2xl font-bold",children:U((x==null?void 0:x.total_budget)||0)})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Est. Hours"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[t.estimated_hours,"h"]})]})})]}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:w("Project Progress")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold",children:[t.progress,"%"]}),g(p,"project_track_progress")&&e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{size:"sm",variant:"outline",onClick:()=>{f.loading("Recalculating progress..."),o.post(route("projects.recalculate-progress",t.id),{},{onSuccess:()=>{f.dismiss(),f.success("Progress recalculated successfully")},onError:()=>{f.dismiss(),f.error("Failed to recalculate progress")}})},className:"h-6 px-2 text-xs",children:e.jsx(us,{className:"h-3 w-3"})})}),e.jsx(te,{children:w("Recalculate Progress")})]})]})]}),e.jsx(he,{value:t.progress,className:"h-2"})]})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs(Qs,{value:fs,onValueChange:Ds,className:"relative",children:[e.jsx("div",{className:"border-b bg-gradient-to-r from-gray-50 to-blue-50 relative z-10",children:e.jsxs(Ys,{className:"h-12 bg-white/80 backdrop-blur-sm border-0 rounded-none p-0 shadow-none relative z-20 flex-wrap w-full justify-center",children:[g(p,"project_view")&&e.jsxs(M,{value:"overview",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Overview"]}),g(p,"project_assign_members")&&e.jsxs(M,{value:"team",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Team"]}),g(p,"project_manage_milestones")&&e.jsxs(M,{value:"milestones",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Milestones"]}),g(p,"project_manage_notes")&&e.jsxs(M,{value:"notes",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Notes"]}),g(p,"project_manage_budget")&&e.jsxs(M,{value:"budget",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Budget"]}),g(p,"expense_view_any")&&e.jsxs(M,{value:"expense",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Expense"]}),g(p,"task_view_any")&&e.jsxs(M,{value:"tasks",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Tasks"]}),g(p,"bug_view_any")&&e.jsxs(M,{value:"bugs",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Bugs"]}),g(p,"timesheet_view_any")&&e.jsxs(M,{value:"timesheet",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Timesheet"]}),g(p,"project_manage_attachments")&&e.jsxs(M,{value:"attachments",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Attachments"]}),g(p,"project_view")&&e.jsxs(M,{value:"activity",className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-lg data-[state=active]:scale-105 hover:bg-primary/10 hover:text-primary text-gray-600",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Activity"]})]})}),e.jsxs("div",{className:"p-4 relative overflow-visible z-0",children:[e.jsxs(z,{value:"overview",className:"space-y-6 mt-0",children:[e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Project Description"})}),e.jsx(d,{children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.description||"No description provided."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5 text-blue-500"}),"Project Timeline"]})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:t.start_date?new Date(t.start_date).toLocaleDateString():"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Deadline:"}),e.jsx("span",{className:"font-medium",children:t.deadline?new Date(t.deadline).toLocaleDateString():"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Hours:"}),e.jsxs("span",{className:"font-medium",children:[t.estimated_hours||0,"h"]})]})]})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-green-500"}),"Team Summary"]})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Managers:"}),e.jsx("span",{className:"font-medium",children:(($e=t.members)==null?void 0:$e.filter(s=>s.role==="manager").length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Team Members:"}),e.jsx("span",{className:"font-medium",children:((Oe=t.members)==null?void 0:Oe.filter(s=>s.role==="member").length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Clients:"}),e.jsx("span",{className:"font-medium",children:((Ge=t.clients)==null?void 0:Ge.length)||0})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-blue-500"}),"Time Tracking Summary"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Hours Logged:"}),e.jsxs("span",{className:"font-semibold",children:[v?v.reduce((s,a)=>s+parseFloat(a.total_hours||0),0).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Billable Hours:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[v?v.reduce((s,a)=>s+parseFloat(a.billable_hours||0),0).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Team Members Active:"}),e.jsx("span",{className:"font-semibold",children:v?new Set(v.map(s=>{var a;return(a=s.user)==null?void 0:a.id})).size:0})]})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-5 w-5 text-purple-500"}),"Project Reports"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Milestones:"}),e.jsx("span",{className:"font-semibold",children:((Ve=t.milestones)==null?void 0:Ve.length)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Notes Created:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:((Ze=t.notes)==null?void 0:Ze.total)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Attachments:"}),e.jsx("span",{className:"font-semibold text-green-600",children:((We=t.attachments)==null?void 0:We.total)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Activities:"}),e.jsx("span",{className:"font-semibold text-orange-600",children:((Qe=t.activities)==null?void 0:Qe.total)||0})]})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-yellow-500"}),"Budget Utilization"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Budget:"}),e.jsx("span",{className:"font-semibold",children:U((x==null?void 0:x.total_budget)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount Spent:"}),e.jsx("span",{className:"font-semibold text-red-600",children:U((x==null?void 0:x.total_spent)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Remaining:"}),e.jsx("span",{className:"font-semibold text-green-600",children:U((x==null?void 0:x.remaining_budget)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Utilization:"}),e.jsxs("span",{className:"font-semibold",children:[((Ye=x==null?void 0:x.utilization_percentage)==null?void 0:Ye.toFixed(1))||"0.0","%"]})]})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-purple-500"}),"Team Performance"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Team Size:"}),e.jsx("span",{className:"font-semibold",children:((Ke=t.members)==null?void 0:Ke.length)||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Members:"}),e.jsx("span",{className:"font-semibold text-green-600",children:v?new Set(v.map(s=>{var a;return(a=s.user)==null?void 0:a.id})).size:0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Hours/Member:"}),e.jsxs("span",{className:"font-semibold",children:[v&&((Je=t.members)!=null&&Je.length)?(v.reduce((s,a)=>s+parseFloat(a.total_hours||0),0)/t.members.length).toFixed(1):"0.0","h"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Project Progress:"}),e.jsxs("span",{className:"font-semibold",children:[t.progress||0,"%"]})]})]})})]})]})]}),e.jsxs(z,{value:"team",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Team & Clients"}),e.jsxs("div",{className:"flex gap-2",children:[g(p,"project_assign_clients")&&e.jsxs(m,{size:"sm",onClick:()=>C("invite-client"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Client"]}),g(p,"project_assign_members")&&e.jsxs(m,{size:"sm",onClick:()=>C("invite-member"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Member"]}),g(p,"project_assign_members")&&e.jsxs(m,{size:"sm",onClick:()=>C("invite-manager"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Manager"]})]})]}),((Xe=t.members)==null?void 0:Xe.filter(s=>s.role==="manager").length)>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3",children:["Managers (",t.members.filter(s=>s.role==="manager").length,")"]}),e.jsx("div",{className:"grid gap-3",children:t.members.filter(s=>s.role==="manager").map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(G,{children:[e.jsx(re,{src:s.user.avatar}),e.jsx(V,{children:s.user.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.user.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:s.role}),_&&e.jsx(m,{size:"sm",variant:"outline",onClick:()=>{L({...s,type:"manager"}),S("member"),O(!0)},children:e.jsx(ce,{className:"h-4 w-4"})})]})]})})},s.user.id))})]}),((es=t.members)==null?void 0:es.filter(s=>s.role==="member").length)>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3",children:["Team Members (",t.members.filter(s=>s.role==="member").length,")"]}),e.jsx("div",{className:"grid gap-3",children:t.members.filter(s=>s.role==="member").map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(G,{children:[e.jsx(re,{src:s.user.avatar}),e.jsx(V,{children:s.user.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.user.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"secondary",children:s.role}),_&&e.jsx(m,{size:"sm",variant:"outline",onClick:()=>{L({...s,type:"member"}),S("member"),O(!0)},children:e.jsx(ce,{className:"h-4 w-4"})})]})]})})},s.user.id))})]}),((ss=t.clients)==null?void 0:ss.length)>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3",children:["Clients (",t.clients.length,")"]}),e.jsx("div",{className:"grid gap-3",children:t.clients.map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(G,{children:[e.jsx(re,{src:s.avatar}),e.jsx(V,{children:s.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",children:"client"}),_&&e.jsx(m,{size:"sm",variant:"outline",onClick:()=>{L({...s,type:"client"}),S("client"),O(!0)},children:e.jsx(ce,{className:"h-4 w-4"})})]})]})})},s.id))})]}),!((ts=t.members)!=null&&ts.length)&&!((as=t.clients)!=null&&as.length)&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(le,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No managers, team members or clients assigned yet."})]})]}),e.jsxs(z,{value:"milestones",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Milestones"}),g(p,"project_manage_milestones")&&e.jsxs(m,{size:"sm",onClick:()=>C("add-milestone"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]}),t.milestones&&t.milestones.length>0?e.jsx("div",{className:"space-y-4",children:t.milestones.slice((be-1)*xe,be*xe).map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx(N,{variant:"outline",children:s.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Due: ",new Date(s.due_date).toLocaleDateString()]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(he,{value:s.progress,className:"h-1"})})]}),_&&e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>C("edit-milestone",s),children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsx(te,{children:"Edit"})]}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>{S("milestone"),C("delete-milestone",s)},children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx(te,{children:"Delete"})]})]})]})})},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(pe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No milestones created yet."}),_&&e.jsxs(m,{className:"mt-4",onClick:()=>C("add-milestone"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add First Milestone"]})]}),t.milestones&&t.milestones.length>xe&&e.jsx(rt,{currentPage:be,totalPages:Math.ceil(t.milestones.length/xe),onPageChange:Le})]}),e.jsxs(z,{value:"notes",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),g(p,"project_manage_notes")&&e.jsxs(m,{size:"sm",onClick:()=>C("add-note"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Fs()},className:"flex gap-2 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ae,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(Ce,{placeholder:"Search by title or content...",value:B,onChange:s=>ye(s.target.value),className:"pl-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(m,{type:"submit",size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-1.5"}),"Search"]}),B&&e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{ye(""),o.get(route("projects.show",t.id),{},{preserveState:!0,preserveScroll:!0,only:["project","noteFilters"]})},children:"Clear"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Per Page:"}),e.jsxs(Pe,{value:we.toString(),onValueChange:Bs,children:[e.jsx(ke,{className:"w-20 h-9 bg-white border-gray-200",children:e.jsx(Te,{})}),e.jsxs(Ae,{children:[e.jsx(D,{value:"5",children:"5"}),e.jsx(D,{value:"10",children:"10"}),e.jsx(D,{value:"20",children:"20"}),e.jsx(D,{value:"50",children:"50"})]})]})]})]})})]}),t.notes&&((rs=t.notes.data)==null?void 0:rs.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:t.notes.data.map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),s.is_pinned&&e.jsx(ge,{className:"h-4 w-4 text-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:s.content}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["By ",s.creator.name]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-1",children:[_&&e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>C("toggle-pin",s),children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsx(te,{children:"Toggle Pin"})]}),_&&e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>C("edit-note",s),children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsx(te,{children:"Edit"})]}),_&&e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>{S("note"),C("delete-note",s)},children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx(te,{children:"Delete"})]})]})]})})},s.id))}),t.notes.links&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",t.notes.from||0," to ",t.notes.to||0," of ",t.notes.total||0," notes"]}),e.jsx("div",{className:"flex gap-1",children:t.notes.links.map((s,a)=>{const r=s.label==="&laquo; Previous"||s.label==="Next &raquo;",i=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(m,{variant:s.active?"default":"outline",size:r?"sm":"icon",className:r?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>{if(s.url){const l=new URL(s.url),c={};l.searchParams.forEach((h,u)=>{c[u]=h}),o.get(route("projects.show",t.id),c,{preserveState:!0,preserveScroll:!0,only:["project","noteFilters"]})}},children:r?i:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},a)})})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ge,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:B?"No notes found":"No notes created yet"}),e.jsxs("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:[B?"Try adjusting your search terms or ":"Create notes to keep track of important information.",B&&e.jsx(m,{variant:"link",className:"p-0 h-auto",onClick:()=>{ye(""),o.get(route("projects.show",t.id),{},{preserveState:!0,preserveScroll:!0,only:["project","noteFilters"]})},children:"clear search"})]}),!B&&_&&e.jsxs(m,{className:"mt-4",onClick:()=>C("add-note"),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add First Note"]})]})]}),Ie&&e.jsxs(z,{value:"budget",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Budget Management"}),x&&e.jsxs(m,{size:"sm",onClick:()=>o.get(route("budgets.show",x.id)),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Show Budget"]})]}),x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Budget"})]}),e.jsx("p",{className:"text-2xl font-bold",children:U(x.total_budget||0)})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(js,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Spent"})]}),e.jsx("p",{className:"text-2xl font-bold",children:U(x.total_spent||0)})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Remaining"})]}),e.jsx("p",{className:"text-2xl font-bold",children:U(x.remaining_budget||0)})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Budget Progress"})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Utilization"}),e.jsxs("span",{children:[((ls=x.utilization_percentage)==null?void 0:ls.toFixed(1))||0,"%"]})]}),e.jsx(he,{value:x.utilization_percentage||0,className:"h-2"})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Recent Expenses"})}),e.jsx(d,{children:((is=x.expenses)==null?void 0:is.length)>0?e.jsx("div",{className:"space-y-3",children:x.expenses.slice(0,3).map(s=>{var a;return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500",children:(a=s.submitter)==null?void 0:a.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold",children:U(s.amount)}),e.jsx(N,{variant:"outline",children:s.status})]})]},s.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No expenses recorded yet"})})]})]}):e.jsx(n,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Budget Set"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create a budget to track project expenses and spending."}),vs&&e.jsxs(m,{onClick:()=>o.get(route("budgets.index")),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Budget"]})]})})]}),e.jsxs(z,{value:"expense",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Expenses"}),e.jsxs(m,{size:"sm",onClick:()=>o.get(route("expenses.index",{project_id:t.id,project_name:t.title})),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Manage Expenses"]})]}),((cs=x==null?void 0:x.expenses)==null?void 0:cs.length)>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Me,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Expenses"})]}),e.jsx("p",{className:"text-2xl font-bold",children:x.expenses.length})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(oe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Approved"})]}),e.jsx("p",{className:"text-2xl font-bold",children:x.expenses.filter(s=>s.status==="approved").length})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold",children:x.expenses.filter(s=>s.status==="pending").length})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Amount"})]}),e.jsx("p",{className:"text-2xl font-bold",children:U(x.expenses.reduce((s,a)=>s+parseFloat(a.amount||0),0))})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Recent Expenses"})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:x.expenses.slice(0,5).map(s=>{var a;return e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.description||"No description"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["By ",(a=s.submitter)==null?void 0:a.name]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleDateString()}),s.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx(N,{variant:"outline",className:"text-xs",children:s.category})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold",children:U(s.amount)}),e.jsx(N,{variant:"outline",className:`text-xs ${s.status==="approved"?"bg-green-100 text-green-800 border-green-200":s.status==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-200":s.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:s.status})]})]})})},s.id)})}),x.expenses.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>o.get(route("expenses.index",{project_id:t.id})),children:["View All ",x.expenses.length," Expenses"]})})]})]})]}):e.jsx(n,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(Me,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Expenses Recorded"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Track project expenses and spending for better budget management."}),e.jsxs(m,{onClick:()=>o.get(route("expenses.index",{project_id:t.id})),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Manage Expenses"]})]})})]}),e.jsxs(z,{value:"tasks",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Tasks"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(m,{size:"sm",onClick:()=>o.get(route("tasks.index",{project_id:t.id,project_name:t.title})),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Manage Tasks"]})})]}),I&&I.length>0?e.jsxs("div",{className:"space-y-6",children:[(()=>{I.reduce((l,c)=>{var u;const h=((u=c.task_stage)==null?void 0:u.name)||"No Stage";return l[h]=(l[h]||0)+1,l},{});const s=I.length,a=I.filter(l=>{var c,h;return((c=l.task_stage)==null?void 0:c.name)==="Completed"||((h=l.task_stage)==null?void 0:h.name)==="Done"}).length,r=I.filter(l=>{var c,h;return((c=l.task_stage)==null?void 0:c.name)==="In Progress"||((h=l.task_stage)==null?void 0:h.name)==="Working"}).length,i=s-a-r;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Tasks"})]}),e.jsx("p",{className:"text-2xl font-bold",children:s})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Completed"})]}),e.jsx("p",{className:"text-2xl font-bold",children:a}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s>0?(a/s*100).toFixed(1):0,"% of total"]})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"In Progress"})]}),e.jsx("p",{className:"text-2xl font-bold",children:r}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s>0?(r/s*100).toFixed(1):0,"% of total"]})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold",children:i}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s>0?(i/s*100).toFixed(1):0,"% of total"]})]})})]})})(),e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Recent Tasks"})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:I.slice(0,5).map(s=>{var a,r,i,l,c;return e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:s.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",className:`text-xs ${s.priority==="critical"?"bg-red-100 text-red-800 border-red-200":s.priority==="high"?"bg-orange-100 text-orange-800 border-orange-200":s.priority==="medium"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"}`,children:s.priority}),e.jsx(N,{variant:"outline",style:{backgroundColor:((a=s.task_stage)==null?void 0:a.color)+"20",borderColor:(r=s.task_stage)==null?void 0:r.color,color:(i=s.task_stage)==null?void 0:i.color},className:"text-xs",children:(l=s.task_stage)==null?void 0:l.name})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:s.assigned_to?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(G,{className:"h-5 w-5",children:[e.jsx(re,{src:s.assigned_to.avatar}),e.jsx(V,{className:"text-xs",children:(c=s.assigned_to.name)==null?void 0:c.charAt(0)})]}),e.jsx("span",{className:"text-xs text-gray-600",children:s.assigned_to.name})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"Unassigned"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-12 bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:`${s.progress}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[s.progress,"%"]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:s.end_date?new Date(s.end_date).toLocaleDateString():"No due date"})]})]})]})},s.id)})}),I.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>o.get(route("tasks.index",{project_id:t.id,project_name:t.title})),children:["View All ",I.length," Tasks"]})})]})]})]}):e.jsx(n,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Tasks Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create tasks to track progress and assign work for this project."}),_&&e.jsxs(m,{onClick:()=>o.get(route("tasks.index",{project_id:t.id,project_name:t.title})),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create First Task"]})]})})]}),e.jsxs(z,{value:"bugs",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Bugs"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(m,{size:"sm",onClick:()=>o.get(route("bugs.index",{project_id:t.id,project_name:t.title})),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Manage Bugs"]})})]}),q&&q.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Bugs"})]}),e.jsx("p",{className:"text-2xl font-bold",children:q.length})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(oe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Open Issues"})]}),e.jsx("p",{className:"text-2xl font-bold",children:q.filter(s=>{var a;return!["Resolved","Closed"].includes((a=s.bug_status)==null?void 0:a.name)}).length})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Critical"})]}),e.jsx("p",{className:"text-2xl font-bold",children:q.filter(s=>s.priority==="critical").length})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Unassigned"})]}),e.jsx("p",{className:"text-2xl font-bold",children:q.filter(s=>!s.assigned_to).length})]})})]}),e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Recent Bugs"})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:q.slice(0,5).map(s=>{var a,r,i,l,c,h;return e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-1",children:s.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",className:`text-xs ${s.priority==="critical"?"bg-red-100 text-red-800 border-red-200":s.priority==="high"?"bg-orange-100 text-orange-800 border-orange-200":s.priority==="medium"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"}`,children:s.priority}),e.jsx(N,{variant:"outline",className:`text-xs ${s.severity==="blocker"?"bg-red-100 text-red-800 border-red-200":s.severity==="critical"?"bg-orange-100 text-orange-800 border-orange-200":s.severity==="major"?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"}`,children:s.severity}),e.jsx(N,{variant:"outline",style:{backgroundColor:((a=s.bug_status)==null?void 0:a.color)+"20",borderColor:(r=s.bug_status)==null?void 0:r.color,color:(i=s.bug_status)==null?void 0:i.color},className:"text-xs",children:(l=s.bug_status)==null?void 0:l.name})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:s.assigned_to?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(G,{className:"h-5 w-5",children:[e.jsx(re,{src:s.assigned_to.avatar}),e.jsx(V,{className:"text-xs",children:(c=s.assigned_to.name)==null?void 0:c.charAt(0)})]}),e.jsx("span",{className:"text-xs text-gray-600",children:s.assigned_to.name})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"Unassigned"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Reported by ",(h=s.reported_by)==null?void 0:h.name]}),e.jsx("span",{className:"text-xs text-gray-500",children:s.end_date?new Date(s.end_date).toLocaleDateString():"No due date"})]})]})]})},s.id)})}),q.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>o.get(route("bugs.index",{project_id:t.id,project_name:t.title})),children:["View All ",q.length," Bugs"]})})]})]})]}):e.jsx(n,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(je,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Bugs Reported"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Track and manage bugs for better project quality."}),_&&e.jsxs(m,{onClick:()=>o.get(route("bugs.index",{project_id:t.id,project_name:t.title})),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Report First Bug"]})]})})]}),e.jsxs(z,{value:"timesheet",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Time Tracking"}),e.jsxs("div",{className:"flex gap-2",children:[_&&e.jsxs(m,{size:"sm",onClick:()=>qe(!0),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Timesheet"]}),e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>o.get(route("timesheets.index",{project_id:t.id})),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Manage Timesheets"]})]})]}),v&&v.length>0?e.jsxs("div",{className:"space-y-4",children:[(()=>{const s=v.reduce((l,c)=>l+parseFloat(c.total_hours||0),0),a=v.reduce((l,c)=>l+parseFloat(c.billable_hours||0),0),r=ps(s,a),i=v.filter(l=>gs(l.end_date,l.status)).length;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Hours"}),r.match&&s>0&&e.jsx(oe,{className:"h-4 w-4 text-green-500",title:"Hours match"})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.toFixed(1),"h"]})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Billable Hours"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[a.toFixed(1),"h (",r.percentage,"%)"]})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Team Members"})]}),e.jsx("p",{className:"text-2xl font-bold",children:new Set(v.map(l=>{var c;return(c=l.user)==null?void 0:c.id})).size})]})}),e.jsx(n,{children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Approved"})]}),e.jsx("p",{className:"text-2xl font-bold",children:v.filter(l=>l.status==="approved").length})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Hours Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.match&&s>0?e.jsxs(N,{className:"bg-green-100 text-green-800 border-green-300",variant:"outline",children:[e.jsx(oe,{className:"h-3 w-3 mr-1"}),"All Hours Billable"]}):s>0?e.jsxs(N,{className:"bg-yellow-100 text-yellow-800 border-yellow-300",variant:"outline",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Partial Billable"]}):e.jsx(N,{variant:"outline",children:"No Hours Logged"}),i>0&&e.jsxs(N,{className:"bg-red-100 text-red-800 border-red-300",variant:"outline",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),i," Overdue"]})]})]}),s>0&&e.jsxs("div",{className:"bg-white rounded-md p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Billable Rate"}),e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[r.percentage,"%"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{value:r.percentage,className:"w-full h-3 bg-gray-200"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-medium text-white drop-shadow",children:[a.toFixed(1),"h / ",s.toFixed(1),"h"]})})]})]})]})})]})})(),e.jsxs(n,{children:[e.jsx(k,{children:e.jsx(T,{children:"Recent Timesheets"})}),e.jsxs(d,{children:[e.jsx("div",{className:"space-y-3",children:v.slice(0,5).map(s=>{var l,c;const a=ps(s.total_hours||0,s.billable_hours||0),r=et({total_hours:s.total_hours||0,billable_hours:s.billable_hours||0,end_date:s.end_date,status:s.status}),i=gs(s.end_date,s.status);return e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h4",{className:"font-medium text-sm",children:["Week of ",new Date(s.start_date).toLocaleDateString()]}),a.match&&s.total_hours>0&&e.jsx(oe,{className:"h-3 w-3 text-green-500",title:"Hours match"}),i&&e.jsxs(N,{className:"bg-red-100 text-red-800 border-red-200 text-xs",variant:"outline",children:[st(s.end_date),"d overdue"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(s.start_date).toLocaleDateString()," - ",new Date(s.end_date).toLocaleDateString()]}),r&&e.jsx(N,{className:`${r.className} text-xs mt-1`,variant:"outline",children:r.label})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(N,{variant:"outline",className:`text-xs ${s.status==="approved"?"bg-green-100 text-green-800 border-green-200":s.status==="submitted"?"bg-blue-100 text-blue-800 border-blue-200":s.status==="rejected"||i?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200"}`,children:i?"Overdue":s.status})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:s.user?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(G,{className:"h-5 w-5",children:[e.jsx(re,{src:s.user.avatar}),e.jsx(V,{className:"text-xs",children:(l=s.user.name)==null?void 0:l.charAt(0)})]}),e.jsx("span",{className:"text-xs text-gray-600",children:s.user.name})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"Unknown User"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3 text-blue-500"}),e.jsx("span",{className:"text-xs text-gray-600",children:a.total})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3 text-green-500"}),e.jsxs("span",{className:"text-xs text-green-600",children:[a.billable," (",a.percentage,"%)"]})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[((c=s.entries)==null?void 0:c.length)||0," entries"]})]})]})]})},s.id)})}),v.length>5&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>o.get(route("timesheets.index",{project_id:t.id})),children:["View All ",v.length," Timesheets"]})})]})]})]}):e.jsx(n,{children:e.jsxs(d,{className:"p-8 text-center",children:[e.jsx(de,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Timesheets Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking time on project tasks to see timesheet data here."}),_&&e.jsxs(m,{onClick:()=>o.get(route("timesheets.index",{project_id:t.id})),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create First Timesheet"]})]})})]}),e.jsxs(z,{value:"attachments",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Project Attachments"}),g(p,"project_manage_attachments")&&e.jsxs(m,{size:"sm",onClick:()=>C("add-attachment"),children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Upload Files"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Ms()},className:"flex gap-2 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ae,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(Ce,{placeholder:"Search by filename or uploader...",value:F,onChange:s=>ve(s.target.value),className:"pl-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(m,{type:"submit",size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-1.5"}),"Search"]}),F&&e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{ve(""),o.get(route("projects.show",t.id),{},{preserveState:!0,preserveScroll:!0,only:["project","attachmentFilters"]})},children:"Clear"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Per Page:"}),e.jsxs(Pe,{value:fe.toString(),onValueChange:zs,children:[e.jsx(ke,{className:"w-20 h-9 bg-white border-gray-200",children:e.jsx(Te,{})}),e.jsxs(Ae,{children:[e.jsx(D,{value:"6",children:"6"}),e.jsx(D,{value:"12",children:"12"}),e.jsx(D,{value:"24",children:"24"}),e.jsx(D,{value:"48",children:"48"})]})]})]})]})})]}),t.attachments&&((ns=t.attachments.data)==null?void 0:ns.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:t.attachments.data.map(s=>{var a,r,i,l,c,h;return e.jsx(n,{className:"group hover:shadow-lg transition-all duration-200 border-0 shadow-md hover:scale-[1.02] bg-gradient-to-br from-white to-gray-50",children:e.jsxs(d,{className:"p-0",children:[e.jsx("div",{className:"relative overflow-hidden rounded-t-lg",children:(a=s.media_item)!=null&&a.url?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.media_item.thumb_url||s.media_item.url,alt:s.media_item.name,className:"w-full h-24 object-cover transition-transform duration-200 group-hover:scale-105",onError:u=>{u.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDIwMCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTUwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04NyA2NUw5MyA3MUwxMDcgNTdMMTIzIDczVjEwNUg3N1Y2NUg4N1oiIGZpbGw9IiM5Q0EzQUYiLz4KPGNpcmNsZSBjeD0iOTEiIGN5PSI1NyIgcj0iNCIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx(m,{variant:"secondary",size:"icon",className:"h-8 w-8 bg-white/90 hover:bg-white shadow-md",onClick:()=>{var u;(u=s.media_item)!=null&&u.url&&window.open(route("project-attachments.download",s.id),"_blank")},children:e.jsx(at,{className:"h-4 w-4 text-gray-700"})}),_&&e.jsx(m,{variant:"secondary",size:"icon",className:"h-8 w-8 bg-red-500/90 hover:bg-red-600 shadow-md",onClick:()=>{S("attachment"),C("delete-attachment",s)},children:e.jsx(ce,{className:"h-4 w-4 text-white"})})]})]}):e.jsx("div",{className:"w-full h-24 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsx(ze,{className:"h-6 w-6 text-gray-400"})})}),e.jsxs("div",{className:"p-2",children:[e.jsx("h4",{className:"font-medium text-xs text-gray-900 truncate mb-1",title:(r=s.media_item)==null?void 0:r.name,children:((i=s.media_item)==null?void 0:i.name)||"Unnamed file"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mb-1",children:[e.jsx(G,{className:"h-3 w-3",children:e.jsx(V,{className:"text-xs bg-blue-100 text-blue-600",children:(c=(l=s.uploaded_by)==null?void 0:l.name)==null?void 0:c.charAt(0)})}),e.jsx("span",{className:"truncate",children:(h=s.uploaded_by)==null?void 0:h.name})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleString()})]})]})},s.id)})}),t.attachments.links&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",t.attachments.from||0," to ",t.attachments.to||0," of ",t.attachments.total||0," attachments"]}),e.jsx("div",{className:"flex gap-1",children:t.attachments.links.map((s,a)=>{const r=s.label==="&laquo; Previous"||s.label==="Next &raquo;",i=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(m,{variant:s.active?"default":"outline",size:r?"sm":"icon",className:r?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>{if(s.url){const l=new URL(s.url),c={};l.searchParams.forEach((h,u)=>{c[u]=h}),o.get(route("projects.show",t.id),c,{preserveState:!0,preserveScroll:!0,only:["project","attachmentFilters"]})}},children:r?i:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},a)})})]})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(ze,{className:"h-10 w-10 text-blue-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:F?"No attachments found":"No attachments yet"}),e.jsxs("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:[F?"Try adjusting your search terms or ":"Upload files to share documents, images, and other resources with your team.",F&&e.jsx(m,{variant:"link",className:"p-0 h-auto",onClick:()=>{ve(""),o.get(route("projects.show",t.id),{},{preserveState:!0,preserveScroll:!0,only:["project","attachmentFilters"]})},children:"clear search"})]}),!F&&_&&e.jsxs(m,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",onClick:()=>C("add-attachment"),children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Upload First Attachment"]})]})]}),e.jsxs(z,{value:"activity",className:"space-y-6 mt-0",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Project Activity"})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),Es()},className:"flex gap-2 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ae,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(Ce,{placeholder:"Search activity...",value:$,onChange:s=>_e(s.target.value),className:"pl-10 bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(m,{type:"submit",size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ae,{className:"h-4 w-4 mr-1.5"}),"Search"]}),$&&e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{_e(""),o.get(route("projects.show",t.id),{},{preserveState:!0,preserveScroll:!0,only:["project","activityFilters"]})},children:"Clear"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Per Page:"}),e.jsxs(Pe,{value:Se.toString(),onValueChange:Us,children:[e.jsx(ke,{className:"w-20 h-9 bg-white border-gray-200",children:e.jsx(Te,{})}),e.jsxs(Ae,{children:[e.jsx(D,{value:"5",children:"5"}),e.jsx(D,{value:"10",children:"10"}),e.jsx(D,{value:"20",children:"20"}),e.jsx(D,{value:"50",children:"50"})]})]})]})]})})]}),t.activities&&((ds=t.activities.data)==null?void 0:ds.length)>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:t.activities.data.map(s=>e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(G,{className:"h-8 w-8",children:e.jsx(V,{className:"text-xs",children:s.user.name.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[e.jsx("span",{children:s.user.name}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.created_at).toLocaleString()})]})]})]})})},s.id))}),t.activities.links&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",t.activities.from||0," to ",t.activities.to||0," of ",t.activities.total||0," activities"]}),e.jsx("div",{className:"flex gap-1",children:t.activities.links.map((s,a)=>{const r=s.label==="&laquo; Previous"||s.label==="Next &raquo;",i=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(m,{variant:s.active?"default":"outline",size:r?"sm":"icon",className:r?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>{if(s.url){const l=new URL(s.url),c={};l.searchParams.forEach((h,u)=>{c[u]=h}),o.get(route("projects.show",t.id),c,{preserveState:!0,preserveScroll:!0,only:["project","activityFilters"]})}},children:r?i:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},a)})})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:$?"No activity found":"No activity recorded yet"}),e.jsxs("p",{className:"text-gray-500 mb-6 max-w-sm mx-auto",children:[$?"Try adjusting your search terms or ":"Project activities will appear here as they happen.",$&&e.jsx(m,{variant:"link",className:"p-0 h-auto",onClick:()=>{_e(""),o.get(route("projects.show",t.id),{},{preserveState:!0,preserveScroll:!0,only:["project","activityFilters"]})},children:"clear search"})]})]})]})]})]})}),e.jsx(Ks,{isOpen:ws,onClose:()=>P(!1),onSubmit:Ls,formConfig:Hs(),initialData:j||(b==="milestone"?{status:"pending"}:b==="member"?{role:"member"}:b==="project"?{status:"planning",priority:"medium",is_public:!1}:{}),title:b==="project"?"Edit Project":`${R==="create"?"Add":"Edit"} ${b.charAt(0).toUpperCase()+b.slice(1)}`,mode:R}),e.jsx(Js,{isOpen:_s,onClose:()=>O(!1),onConfirm:Rs,itemName:(j==null?void 0:j.title)||(j==null?void 0:j.name)||((ms=j==null?void 0:j.user)==null?void 0:ms.name)||((os=j==null?void 0:j.media_item)==null?void 0:os.name)||"",entityName:b==="member"?"team member":b,warningMessage:b==="member"?`This will remove ${((xs=j==null?void 0:j.user)==null?void 0:xs.name)||"this member"} from the project team.`:b==="client"?`This will remove ${(j==null?void 0:j.name)||"this client"} from the project.`:b==="attachment"?"This file will be permanently deleted from the project.":"This action cannot be undone.",additionalInfo:b==="member"?["Access to project resources will be revoked","Task assignments may need to be reassigned","Time tracking history will be preserved"]:b==="client"?["Client access to project will be removed","Project visibility for this client will be revoked"]:b==="attachment"?["File will be removed from all project references","Download history will be preserved"]:[]}),e.jsx(tt,{isOpen:Ss,onClose:()=>qe(!1),projects:[t]})]})}export{da as default};
