import{r as p,j as e}from"./ui-Ps9nvBG1.js";import{u as k,e as N,I as E,B as x,t as u,f as C,C as P,d as v}from"./app-BTt_gkO3.js";import{l as z,E as F,u as I,a as T,C as g}from"./react-stripe.esm-BlLEi23z.js";import{L as w}from"./loader-circle-LF6za7Wc.js";const M=({invoice:n,amount:s,onSuccess:o,onCancel:d})=>{const{t:a}=k(),i=I(),t=T(),[r,y]=p.useState(""),[m,c]=p.useState(!1),l=async f=>{if(f.preventDefault(),!i||!t||!r.trim()){u.error(a("Please fill in all required fields"));return}c(!0);const j=t.getElement(g);if(!j)return;const{error:b,paymentMethod:S}=await i.createPaymentMethod({type:"card",card:j,billing_details:{name:r}});if(b){u.error(b.message||a("Payment failed")),c(!1);return}C.post(route("invoices.payment.process",n.payment_token),{payment_method:"stripe",invoice_token:n.payment_token,amount:s||n.balance_due,payment_method_id:S.id,cardholder_name:r},{onSuccess:()=>{o()},onError:_=>{u.error(_.message||a("Payment failed"))},onFinish:()=>{c(!1)}})},h={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}};return e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"cardholder-name",children:a("Name on card")}),e.jsx(E,{id:"cardholder-name",type:"text",value:r,onChange:f=>y(f.target.value),placeholder:a("Enter cardholder name"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:a("Card details")}),e.jsx("div",{className:"p-3 border rounded-md",children:e.jsx(g,{options:h})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:d,disabled:m,className:"flex-1",children:a("Cancel")}),e.jsx(x,{type:"submit",disabled:!i||m,className:"flex-1",children:m?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}),a("Processing...")]}):a("Pay Now")})]})]})};function A({invoice:n,stripeKey:s,amount:o,onSuccess:d,onCancel:a}){const{t:i}=k(),[t,r]=p.useState(null);return p.useEffect(()=>{s&&s.startsWith("pk_")&&r(z(s))},[s]),t?e.jsx(F,{stripe:t,children:e.jsx(M,{invoice:n,amount:o,onSuccess:d,onCancel:a})}):e.jsx("div",{className:"p-4 text-center text-red-500",children:i("Stripe not configured properly")})}function $({invoiceToken:n,amount:s,paymentMethod:o,stripeKey:d,onSuccess:a,onCancel:i}){const[t,r]=p.useState(!1),y=()=>{r(!0),C.post(route("invoices.payment.process",n),{payment_method:"bank",invoice_token:n,amount:s},{onSuccess:()=>{a()},onError:l=>{const h=l.error||"Payment processing failed. Please try again.";u.error(h)},onFinish:()=>{r(!1)}})},m=l=>({stripe:"Credit Card (Stripe)",paypal:"PayPal",razorpay:"Razorpay",bank:"Bank Transfer",paystack:"Paystack",flutterwave:"Flutterwave",paytabs:"PayTabs",skrill:"Skrill",coingate:"CoinGate",payfast:"PayFast",tap:"Tap",xendit:"Xendit",paytr:"PayTR",mollie:"Mollie",toyyibpay:"ToyyibPay",cashfree:"Cashfree",khalti:"Khalti",iyzipay:"Iyzipay",benefit:"Benefit",ozow:"Ozow",easebuzz:"Easebuzz",authorizenet:"Authorize.Net",fedapay:"FedaPay",payhere:"PayHere",cinetpay:"CinetPay",paiement:"PaiementPro",yookassa:"YooKassa",aamarpay:"AamarPay",midtrans:"Midtrans",paymentwall:"PaymentWall",sspay:"SSPay"})[l]||l,c=l=>`$${l.toFixed(2)}`;return o==="stripe"?e.jsx(A,{invoice:{id:14,balance_due:s},stripeKey:d||"pk_test_aLoicAw16w12wxLlmI9uluaf008XMnn2VJ",onSuccess:a,onCancel:i}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(P,{children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"font-medium",children:m(o)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-bold text-lg",children:c(s)})]})]})})}),o==="bank"&&e.jsx(P,{className:"border-blue-200 bg-blue-50",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-2",children:"Bank Transfer Instructions:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"• Transfer the exact amount shown above"}),e.jsx("li",{children:"• Include the invoice number in the transfer description"}),e.jsx("li",{children:"• Your payment will be verified within 1-3 business days"}),e.jsx("li",{children:"• You will receive a confirmation email once verified"})]})]})})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(x,{variant:"outline",onClick:i,disabled:t,className:"flex-1",children:"Cancel"}),e.jsx(x,{onClick:y,disabled:t,className:"flex-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Pay ${c(s)}`})]})]})}export{$ as I,A as a};
