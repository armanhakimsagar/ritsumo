import{j as e,r as j}from"./ui-Ps9nvBG1.js";import{g as x,u as z,K as C,f as l,P as u,B as o}from"./app-BTt_gkO3.js";import{R as m,P as k}from"./page-template-BeQadk1c.js";import{P as B}from"./progress-B213Sqsa.js";import{f as r}from"./currency-kzm_C5pv.js";import{T as v}from"./triangle-alert-BuDHDWvi.js";import{T as h}from"./trending-up-BkxnV74k.js";import{T as S}from"./trending-down-CxK3FgOd.js";import{B as E}from"./BudgetFormModal-CUZ0F7FS.js";import{E as P}from"./ExpenseFormModal-B2iwCfiU.js";import{E as T}from"./eye-BGcEqodV.js";import{S as O}from"./square-pen-BE6Ef4zh.js";import{C as N}from"./calendar-pZCS8WPy.js";import{D as b}from"./dollar-sign-CY6xo33T.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./textarea-DPiv_-Qc.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./use-favicon-vjALIuby.js";import"./trash-2-WsAE_ige.js";function $({budget:t}){const s=a=>a>=90?"text-red-600":a>=75?"text-yellow-600":"text-green-600",n=a=>a>=90?"bg-red-500":a>=75?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Budget Overview"}),(t.utilization_percentage||0)>=90&&e.jsxs(x,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),"Critical"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Budget Utilization"}),e.jsxs("span",{className:s(t.utilization_percentage||0),children:[(t.utilization_percentage||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{value:t.utilization_percentage||0,className:"h-3"}),e.jsx("div",{className:`absolute top-0 left-0 h-3 rounded-full transition-all ${n(t.utilization_percentage||0)}`,style:{width:`${Math.min(t.utilization_percentage||0,100)}%`}})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r(t.total_budget||0)}),e.jsx("div",{className:"text-gray-500",children:"Total Budget"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r(t.total_spent||0)}),e.jsx("div",{className:"text-gray-500",children:"Spent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`font-medium ${(t.remaining_budget||0)<0?"text-red-600":"text-green-600"}`,children:r(t.remaining_budget||0)}),e.jsx("div",{className:"text-gray-500",children:"Remaining"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Budget Categories"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Track spending across different categories"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid gap-6",children:t.categories.map(a=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:a.color}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500",children:a.description||"No description"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${s(a.utilization_percentage||0)}`,children:[(a.utilization_percentage||0).toFixed(1),"%"]}),e.jsx("div",{className:"flex items-center gap-1 text-sm",children:(a.utilization_percentage||0)>100?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Over budget"})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:"On track"})]})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-300 shadow-sm",style:{backgroundColor:a.color,width:`${Math.min(a.utilization_percentage||0,100)}%`}})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:r(a.allocated_amount||0)}),e.jsx("div",{className:"text-gray-500",children:"Allocated"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:r(a.total_spent||0)}),e.jsx("div",{className:"text-gray-500",children:"Spent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`font-semibold ${(a.allocated_amount||0)-(a.total_spent||0)<0?"text-red-600":"text-green-600"}`,children:r((a.allocated_amount||0)-(a.total_spent||0))}),e.jsx("div",{className:"text-gray-500",children:"Remaining"})]})]})]})]},a.id))})})]})]})}function we(){var p;const{t}=z(),{budget:s,projects:n=[],permissions:a}=C().props,[f,g]=j.useState(!1),[w,d]=j.useState(!1),y=i=>({active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[i]||"bg-gray-100 text-gray-800",c=[{label:t("View Project"),icon:e.jsx(T,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>l.get(route("projects.show",s.project.id))},{label:t("View Expenses"),icon:e.jsx(m,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>l.get(route("expenses.index",{project_id:s.project_id,budget_id:s.id}))}];a!=null&&a.create&&c.push({label:t("Add Expense"),icon:e.jsx(u,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>d(!0)}),a!=null&&a.update&&c.push({label:t("Edit Budget"),icon:e.jsx(O,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>g(!0)});const _=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Budgets"),href:route("budgets.index")},{title:s.project.title}];return e.jsxs(k,{title:s.project.title,actions:c,breadcrumbs:_,noPadding:!0,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg shadow-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:s.project.title}),e.jsx("p",{className:"text-blue-100",children:s.description||t("Project Budget Overview")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(x,{className:`${y(s.status)} border-0`,variant:"secondary",children:s.status}),e.jsxs("div",{className:"mt-2 text-sm text-blue-100 flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsxs("span",{className:"capitalize",children:[s.period_type," ",t("Budget")]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.start_date?new Date(s.start_date).toLocaleDateString():t("Not set")," ",t("to")," ",s.end_date?new Date(s.end_date).toLocaleDateString():t("Ongoing")]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t("Total Budget")})]}),e.jsx("p",{className:"text-2xl font-bold",children:r(s.total_budget||0)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t("Total Spent")})]}),e.jsx("p",{className:"text-2xl font-bold",children:r(s.total_spent||0)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t("Remaining")})]}),e.jsx("p",{className:`text-2xl font-bold ${(s.remaining_budget||0)<0?"text-red-200":"text-green-200"}`,children:r(s.remaining_budget||0)})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(s.utilization_percentage||0)>=90?e.jsx(v,{className:"h-5 w-5 text-red-200"}):e.jsx(h,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:t("Utilization")})]}),e.jsxs("p",{className:"text-2xl font-bold",children:[(s.utilization_percentage||0).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:t("Budget Progress")}),e.jsxs("span",{children:[(s.utilization_percentage||0).toFixed(1),"%"]})]}),e.jsx("div",{className:"bg-white/20 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${(s.utilization_percentage||0)>=90?"bg-red-400":(s.utilization_percentage||0)>=75?"bg-yellow-400":"bg-green-400"}`,style:{width:`${Math.min(s.utilization_percentage||0,100)}%`}})})]})]})}),e.jsx($,{budget:s}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-blue-600"}),t("Recent Expenses")]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t("Latest expense submissions for this project")})]}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>l.get(route("expenses.index",{project_id:s.project_id})),children:t("View All")})]})}),e.jsx("div",{className:"p-6",children:((p=s.expenses)==null?void 0:p.length)>0?e.jsxs("div",{className:"space-y-4",children:[s.expenses.slice(0,5).map(i=>e.jsx("div",{className:"group bg-gray-50 rounded-xl p-5 hover:bg-blue-50 hover:border-blue-200 border border-transparent transition-all duration-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"font-semibold text-gray-900 group-hover:text-blue-900",children:i.title}),e.jsx(x,{variant:"secondary",className:i.status==="approved"?"bg-green-100 text-green-800 border-green-200":i.status==="rejected"?"bg-red-100 text-red-800 border-red-200":"bg-yellow-100 text-yellow-800 border-yellow-200",children:i.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{className:"flex items-center gap-1",children:e.jsx("span",{className:"font-medium",children:i.submitter.name})}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"h-3 w-3"}),new Date(i.expense_date).toLocaleDateString()]}),i.budget_category&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.budget_category.color}}),i.budget_category.name]})]})]}),e.jsxs("div",{className:"text-right ml-6",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900 group-hover:text-blue-900",children:r(i.amount)}),e.jsx("div",{className:"text-sm text-gray-500",children:i.vendor&&`via ${i.vendor}`})]})]})},i.id)),s.expenses.length>5&&e.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:e.jsxs(o,{variant:"ghost",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50",onClick:()=>l.get(route("expenses.index",{project_id:s.project_id})),children:[t("View")," ",s.expenses.length-5," ",t("more expenses")," →"]})})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-blue-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-6",children:e.jsx(m,{className:"h-10 w-10 text-blue-500"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("No expenses submitted yet")}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:t("Start tracking your project expenses to monitor budget utilization and spending patterns.")}),(a==null?void 0:a.create)&&e.jsxs(o,{size:"lg",onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),t("Submit Your First Expense")]})]})})]})]}),e.jsx(E,{isOpen:f,onClose:()=>g(!1),budget:s,mode:"edit"}),e.jsx(P,{isOpen:w,onClose:()=>d(!1),projects:n,mode:"create",currentProject:{...s.project,budget:{categories:s.categories||[]}},redirectUrl:route("budgets.show",s.id)})]})}export{we as default};
