import{r as l,j as e}from"./ui-Ps9nvBG1.js";import{w as L,e as b,u as H,K as I,t as v,L as U,C as g,a as y,b as C,B as R,r as F,f as z,d as T,I as w,g as E}from"./app-BTt_gkO3.js";import{P as $}from"./page-template-BeQadk1c.js";import{T as A,a as O,b as P,c as D}from"./tabs-D83PhGuv.js";import{R as K}from"./rich-text-editor-DB5lHpT7.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./textarea-DPiv_-Qc.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";import"./unlink-Da4sYO3X.js";import"./list-D1IfOmxs.js";import"./quote-DqGKb1gV.js";import"./link-DceUnw3z.js";const V=l.forwardRef(({label:a,name:m,value:x="",onChange:t,placeholder:i,className:u,error:d,required:h,disabled:j=!1},p)=>{const o=l.useRef(null);return l.useImperativeHandle(p,()=>({getContent:()=>{var c;return((c=o.current)==null?void 0:c.getContent())||""},setContent:c=>{var f;return(f=o.current)==null?void 0:f.setContent(c)},focus:()=>{var c;return(c=o.current)==null?void 0:c.focus()}})),e.jsxs("div",{className:L("space-y-2",u),children:[a&&e.jsxs(b,{htmlFor:m,className:"text-sm font-medium",children:[a,h&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(K,{ref:o,content:x,onChange:t,placeholder:i,editable:!j,className:L(d&&"border-destructive",j&&"opacity-50 cursor-not-allowed")}),d&&e.jsx("p",{className:"text-sm text-destructive",children:d})]})});V.displayName="RichTextField";function ke({template:a,languages:m,variables:x}){var S,k;const{t}=H(),{flash:i}=I().props,[u,d]=l.useState(a.from),[h,j]=l.useState(((S=m[0])==null?void 0:S.code)||"en"),[p,o]=l.useState(a.email_template_langs.reduce((s,r)=>(s[r.lang]={subject:r.subject,content:r.content},s),{})),c=(s,r)=>{o(n=>({...n,[s]:{...n[s],subject:r}}))},f=(s,r)=>{o(n=>({...n,[s]:{...n[s],content:r}}))};l.useEffect(()=>{i!=null&&i.success&&v.success(i.success),i!=null&&i.error&&v.error(i.error)},[i]);const _=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Email Templates"),href:route("email-templates.index")},{title:a.name}],B=[];return e.jsxs($,{title:a.name,url:route("email-templates.show",a.id),breadcrumbs:_,actions:B,children:[e.jsx(U,{title:`Edit Template - ${a.name}`}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(C,{children:t("Template Settings")}),e.jsxs(R,{onClick:()=>{z.put(route("email-templates.update-settings",a.id),{from:u})},size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("Save Changes")]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:t("Template Name")}),e.jsx(w,{value:a.name,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Template name cannot be changed")})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"from",children:t("From Name")}),e.jsx(w,{id:"from",value:u,onChange:s=>d(s.target.value),placeholder:t("Enter from name (e.g., {app_name}, Support Team)"),className:"focus:ring-2 focus:ring-primary"})]})]})]}),e.jsxs(g,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(C,{children:t("Email Content")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("Customize email content for different languages")})]}),e.jsxs(R,{onClick:()=>{const s=p[h];s&&z.put(route("email-templates.update-content",a.id),{lang:h,subject:s.subject,content:s.content})},size:"sm",className:"shrink-0",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("Save Content")]})]})}),e.jsx(T,{children:e.jsxs(A,{defaultValue:(k=m[0])==null?void 0:k.code,onValueChange:j,className:"w-full",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(O,{className:"inline-flex h-auto p-1 w-max",children:m.map(s=>e.jsx(P,{value:s.code,className:"text-xs px-3 py-2 whitespace-nowrap data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:s.code.toUpperCase()},s.code))})})}),m.map(s=>{var r,n;return e.jsxs(D,{value:s.code,className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(E,{variant:"default",className:"px-3 py-1",children:s.code.toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Edit email content for this language")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(b,{htmlFor:`subject-${s.code}`,className:"text-sm font-medium",children:t("Email Subject")}),e.jsx(w,{id:`subject-${s.code}`,value:((r=p[s.code])==null?void 0:r.subject)||"",onChange:N=>c(s.code,N.target.value),placeholder:t("Enter email subject (you can use variables like {app_name})"),className:"focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(V,{label:t("Email Content"),value:((n=p[s.code])==null?void 0:n.content)||"",onChange:N=>f(s.code,N),placeholder:t("Write your email content here. You can use HTML formatting and variables..."),className:"min-h-[300px]"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ðŸ’¡ ",t("Tip: Use the variables from the sidebar to personalize your emails")]})]})]})]},s.code)})]})})]})]}),e.jsx("div",{children:e.jsxs(g,{children:[e.jsxs(y,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx("span",{children:t("Available Variables")}),e.jsx(E,{variant:"secondary",className:"text-xs",children:Object.keys(x).length})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("Click to copy variables to use in your email content")})]}),e.jsxs(T,{children:[e.jsx("div",{className:"space-y-3",children:Object.entries(x).map(([s,r])=>e.jsxs("div",{className:"group p-3 bg-muted/50 rounded-lg border hover:bg-muted/80 cursor-pointer transition-colors",onClick:()=>{navigator.clipboard.writeText(s),v.success(t("Variable copied to clipboard"))},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-sm font-mono text-primary font-medium bg-background px-1.5 py-0.5 rounded",children:s}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(E,{variant:"outline",className:"text-xs",children:t("Click to copy")})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 leading-relaxed",children:r})]},s))}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["ðŸ’¡ ",e.jsxs("strong",{children:[t("Tip"),":"]})," ",t("These variables will be automatically replaced with actual values when emails are sent.")]})})]})]})})]})]})}export{ke as default};
