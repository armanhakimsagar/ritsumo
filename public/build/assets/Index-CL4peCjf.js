import{r as c,j as e}from"./ui-Ps9nvBG1.js";import{u as de,K as me,t as p,C as A,d as L,B as l,f as d,h as u,P as U,S as q,I as xe,g as he,ap as pe}from"./app-BTt_gkO3.js";import{S as V,a as B,b as H,c as J,d as n}from"./select-z0EzYxFC.js";import{P as G,V as K}from"./page-template-BeQadk1c.js";import{E as ue}from"./EnhancedDeleteModal-BUN-gSW9.js";import Q from"./ZoomMeetingModal-B3jRzZ95.js";import{F as je}from"./filter-C99mLYzj.js";import{C as ge}from"./clock-NAV_RQL_.js";import{C as W}from"./trending-up-BkxnV74k.js";import{E as fe}from"./eye-BGcEqodV.js";import{S as Ne}from"./square-pen-BE6Ef4zh.js";import{T as ve}from"./trash-2-WsAE_ige.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./textarea-DPiv_-Qc.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";function ls(){var Z,D,E,F,I,O,R;const{t}=de(),{auth:r,meetings:a,projects:m,members:y,hasZoomConfig:X,filters:N={},permissions:we,flash:o}=me().props,[j,S]=c.useState(N.search||""),[g,C]=c.useState(N.status||"all"),[f,M]=c.useState(N.project_id||"all"),[v,z]=c.useState(!1),[Y,w]=c.useState(!1),[$,_]=c.useState(!1),[ee,b]=c.useState(!1),[x,k]=c.useState(null);c.useEffect(()=>{o!=null&&o.success&&p.success(o.success),o!=null&&o.error&&p.error(o.error)},[o]);const se=s=>{s.preventDefault(),te()},te=()=>{const s={page:1};j&&(s.search=j),g!=="all"&&(s.status=g),f!=="all"&&(s.project_id=f),d.get(route("zoom-meetings.index"),s,{preserveState:!1,preserveScroll:!1})},ae=s=>{k(s),_(!0)},re=s=>{k(s),b(!0)},le=()=>{d.delete(route("zoom-meetings.destroy",x.id),{onSuccess:()=>{b(!1)},onError:()=>{p.error("Failed to delete meeting")}})},ie=s=>{const i={scheduled:"bg-blue-100 text-blue-800",started:"bg-green-100 text-green-800",ended:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"};return i[s]||i.scheduled},P=()=>g!=="all"||f!=="all"||j!=="",oe=()=>{C("all"),M("all"),S(""),z(!1),d.get(route("zoom-meetings.index"),{page:1},{preserveState:!1,preserveScroll:!1})};if(!X){const s=((D=(Z=r==null?void 0:r.user)==null?void 0:Z.roles)==null?void 0:D.map(h=>h.name))||[],i=s.includes("company")||s.includes("owner");return e.jsx(G,{title:t("Zoom Meetings"),url:"/zoom-meetings",children:e.jsx(A,{children:e.jsxs(L,{className:"p-6 text-center",children:[e.jsx(K,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Zoom Integration Not Configured"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i?"Please configure your Zoom API credentials in settings to use this feature.":"Zoom integration has not been configured for this workspace. Please contact your administrator to set up Zoom credentials."}),i&&e.jsx(l,{onClick:()=>d.get(route("settings")),children:"Configure Zoom Settings"})]})})})}const T=[];u(r==null?void 0:r.permissions,"zoom_meeting_create")&&T.push({label:t("Create Meeting"),icon:e.jsx(U,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>{console.log("Create Meeting button clicked"),w(!0)}});const ce=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Zoom Meetings")}];return e.jsxs(G,{title:t("Zoom Meetings"),url:"/zoom-meetings",actions:T,breadcrumbs:ce,noPadding:!0,children:[e.jsx(A,{className:"mb-4 hover:shadow-md transition-shadow",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:(a==null?void 0:a.total)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:t("Total Meetings")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:((E=a==null?void 0:a.data)==null?void 0:E.filter(s=>s.status==="scheduled").length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:t("Scheduled")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-orange-600",children:((F=a==null?void 0:a.data)==null?void 0:F.filter(s=>new Date(s.start_time)>new Date).length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:t("Upcoming")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-600",children:((I=a==null?void 0:a.data)==null?void 0:I.filter(s=>s.status==="ended").length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:t("Completed")})]})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("form",{onSubmit:se,className:"flex gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(q,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(xe,{placeholder:t("Search meetings..."),value:j,onChange:s=>S(s.target.value),className:"w-full pl-9"})]}),e.jsxs(l,{type:"submit",size:"sm",children:[e.jsx(q,{className:"h-4 w-4 mr-1.5"}),t("Search")]})]}),e.jsx("div",{className:"ml-2",children:e.jsxs(l,{variant:P()?"default":"outline",size:"sm",className:"h-8 px-2 py-1",onClick:()=>z(!v),children:[e.jsx(je,{className:"h-3.5 w-3.5 mr-1.5"}),t(v?"Hide Filters":"Filters")]})})]})}),v&&e.jsx("div",{className:"w-full mt-3 p-4 bg-gray-50 border rounded-md",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("Status")}),e.jsxs(V,{value:g,onValueChange:C,children:[e.jsx(B,{className:"w-40",children:e.jsx(H,{placeholder:t("All Status")})}),e.jsxs(J,{children:[e.jsx(n,{value:"all",children:t("All Status")}),e.jsx(n,{value:"scheduled",children:"Scheduled"}),e.jsx(n,{value:"started",children:"Started"}),e.jsx(n,{value:"ended",children:"Ended"}),e.jsx(n,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:t("Project")}),e.jsxs(V,{value:f,onValueChange:M,children:[e.jsx(B,{className:"w-40",children:e.jsx(H,{placeholder:t("All Projects")})}),e.jsxs(J,{children:[e.jsx(n,{value:"all",children:t("All Projects")}),m==null?void 0:m.map(s=>e.jsx(n,{value:s.id.toString(),children:s.title},s.id))]})]})]}),e.jsx(l,{variant:"outline",size:"sm",className:"h-9",onClick:oe,disabled:!P(),children:t("Reset Filters")})]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Meeting")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Date & Time")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Duration")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Project")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Meeting URLs")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:t("Actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:((O=a==null?void 0:a.data)==null?void 0:O.length)>0?a.data.map(s=>{var i;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),s.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(he,{className:ie(s.status),variant:"secondary",children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"h-4 w-4 mr-1"}),pe(s.start_time)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.duration," minutes"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((i=s.project)==null?void 0:i.title)||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex gap-1",children:[s.join_url&&e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(s.join_url),p.success("Join URL copied to clipboard")},className:"text-blue-600 border-blue-200 hover:bg-blue-50 h-7 px-2 text-xs",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Join URL"]}),s.start_url&&e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(s.start_url),p.success("Start URL copied to clipboard")},className:"text-green-600 border-green-200 hover:bg-green-50 h-7 px-2 text-xs",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Start URL"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-1",children:[u(r==null?void 0:r.permissions,"zoom_meeting_view")&&e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>d.get(route("zoom-meetings.show",s.id)),className:"text-blue-500 hover:text-blue-700 h-8 w-8",children:e.jsx(fe,{className:"h-4 w-4"})}),u(r==null?void 0:r.permissions,"zoom_meeting_update")&&e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>ae(s),className:"text-amber-500 hover:text-amber-700 h-8 w-8",children:e.jsx(Ne,{className:"h-4 w-4"})}),u(r==null?void 0:r.permissions,"zoom_meeting_delete")&&e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>re(s),className:"text-red-500 hover:text-red-700 h-8 w-8",children:e.jsx(ve,{className:"h-4 w-4"})})]})})]},s.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[e.jsx(K,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No meetings found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first Zoom meeting."}),u(r==null?void 0:r.permissions,"zoom_meeting_create")&&e.jsxs(l,{onClick:()=>w(!0),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Create Meeting"]})]})})})]})})}),(a==null?void 0:a.links)&&a.data.length>0&&e.jsxs("div",{className:"mt-6 bg-white p-4 rounded-lg shadow flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t("Showing")," ",e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.from)||0})," ",t("to")," ",e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.to)||0})," ",t("of")," ",e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.total)||0})," ",t("meetings")]}),e.jsx("div",{className:"flex gap-1",children:(R=a==null?void 0:a.links)==null?void 0:R.map((s,i)=>{const h=s.label==="&laquo; Previous"||s.label==="Next &raquo;",ne=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(l,{variant:s.active?"default":"outline",size:h?"sm":"icon",className:h?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>s.url&&d.get(s.url),children:h?ne:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},i)})})]}),e.jsx(Q,{isOpen:Y,onClose:()=>w(!1),projects:m||[],members:y||[]}),e.jsx(Q,{isOpen:$,onClose:()=>_(!1),meeting:x,projects:m||[],members:y||[]}),e.jsx(ue,{isOpen:ee,onClose:()=>b(!1),onConfirm:le,itemName:(x==null?void 0:x.title)||"",entityName:t("meeting"),warningMessage:t("This meeting will be permanently deleted from Zoom as well.")})]})}export{ls as default};
