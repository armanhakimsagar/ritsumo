import{j as e,r as h}from"./ui-Ps9nvBG1.js";import{P as f}from"./page-template-BeQadk1c.js";import{C as d,a as o,b as c,d as g,g as m,u as w,B as k,f as _}from"./app-BTt_gkO3.js";import{f as n}from"./currency-kzm_C5pv.js";import{D as C}from"./dollar-sign-CY6xo33T.js";import{T as x}from"./trending-up-BkxnV74k.js";import{C as v}from"./circle-check-big-BMYVPbRH.js";import{T as u}from"./triangle-alert-BuDHDWvi.js";import{E as B}from"./eye-BGcEqodV.js";import"./vendor-B1hewrmX.js";import"./textarea-DPiv_-Qc.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./use-favicon-vjALIuby.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";function T({summary:t,currency:s="USD"}){if(!t)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Loading budget overview..."})});const a=[{title:"Total Budget",value:n(t.total_budget||0),icon:C,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Total Spent",value:n(t.total_spent||0),icon:x,color:"text-green-600",bgColor:"bg-green-100"},{title:"Remaining Budget",value:n(t.remaining_budget||0),icon:v,color:(t.remaining_budget||0)<0?"text-red-600":"text-green-600",bgColor:(t.remaining_budget||0)<0?"bg-red-100":"bg-green-100"},{title:"Average Utilization",value:`${(t.average_utilization||0).toFixed(1)}%`,icon:x,color:(t.average_utilization||0)>=90?"text-red-600":(t.average_utilization||0)>=75?"text-yellow-600":"text-green-600",bgColor:(t.average_utilization||0)>=90?"bg-red-100":(t.average_utilization||0)>=75?"bg-yellow-100":"bg-green-100"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((l,p)=>e.jsxs(d,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:l.title}),e.jsx("div",{className:`p-2 rounded-full ${l.bgColor}`,children:e.jsx(l.icon,{className:`h-4 w-4 ${l.color}`})})]}),e.jsx(g,{children:e.jsx("div",{className:`text-2xl font-bold ${l.color}`,children:l.value})})]},p))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Active Budgets"})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.active_budgets||0}),e.jsx(m,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Active"})]})})]}),e.jsxs(d,{children:[e.jsx(o,{children:e.jsx(c,{className:"text-sm font-medium text-gray-600",children:"Pending Approvals"})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`text-2xl font-bold ${(t.pending_approvals||0)>0?"text-yellow-600":"text-green-600"}`,children:t.pending_approvals||0}),(t.pending_approvals||0)>0?e.jsxs(m,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3"}),"Pending"]}):e.jsxs(m,{variant:"secondary",className:"bg-green-100 text-green-800 flex items-center gap-1",children:[e.jsx(v,{className:"h-3 w-3"}),"Clear"]})]})})]})]})]})}function oe({initialData:t}){const{t:s}=w(),[a,l]=h.useState(t||null),[p,N]=h.useState(!t);h.useEffect(()=>{t||y()},[t]);const y=async()=>{try{const i=await(await fetch(route("budget-dashboard.overview"))).json();l(i)}catch(r){console.error("Failed to load dashboard data:",r)}finally{N(!1)}},j=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Budget & Expenses")},{title:s("Budget Dashboard")}];return p?e.jsx(f,{title:s("Budget Dashboard"),description:s("Overview of budget performance and expense tracking"),url:"/budgets/dashboard",breadcrumbs:j,children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:s("Loading dashboard...")})})}):e.jsx(f,{title:s("Budget Dashboard"),description:s("Overview of budget performance and expense tracking"),url:"/budgets/dashboard",breadcrumbs:j,noPadding:!0,children:e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 rounded-xl p-6",children:e.jsx(T,{summary:a==null?void 0:a.summary})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(d,{className:"lg:col-span-2 shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(o,{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(c,{className:"flex items-center gap-2 text-green-800 dark:text-green-200",children:[e.jsx(x,{className:"h-5 w-5"}),s("Recent Expenses")]}),e.jsxs(k,{variant:"outline",size:"sm",className:"border-green-200 text-green-700 hover:bg-green-50",onClick:()=>_.get(route("expenses.index")),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),s("View All")]})]})}),e.jsx(g,{className:"p-6",children:a!=null&&a.recent_expenses&&a.recent_expenses.length>0?e.jsx("div",{className:"space-y-4",children:a.recent_expenses.slice(0,6).map(r=>{var i,b;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(x,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.title||s("Untitled Expense")}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[((i=r.project)==null?void 0:i.title)||s("Unknown Project")," â€¢ ",((b=r.submitter)==null?void 0:b.name)||s("Unknown User")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-gray-100",children:n(r.amount||0)}),e.jsx(m,{variant:"secondary",className:r.status==="approved"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":r.status==="rejected"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",children:r.status||"pending"})]})]},r.id||Math.random())})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(x,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium",children:s("No recent expenses")}),e.jsx("p",{className:"text-sm",children:s("Expenses will appear here once submitted")})]})})]}),e.jsxs(d,{className:"shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(o,{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-950/20 dark:to-pink-950/20 rounded-t-lg",children:e.jsxs(c,{className:"flex items-center gap-2 text-purple-800 dark:text-purple-200",children:[e.jsx(u,{className:"h-5 w-5"}),s("Top Categories")]})}),e.jsx(g,{className:"p-6",children:a!=null&&a.top_categories&&a.top_categories.length>0?e.jsx("div",{className:"space-y-4",children:a.top_categories.slice(0,5).map((r,i)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",style:{backgroundColor:r.color||"#6B7280"},children:(r.name||"U").charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.name||s("Unknown")}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n(r.total_spent||0)," of ",n(r.allocated_amount||0)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{backgroundColor:r.color||"#6B7280",width:`${Math.min((r.total_spent||0)/(r.allocated_amount||1)*100,100)}%`}})})]})]},i))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(u,{className:"h-6 w-6 text-gray-400"})}),e.jsx("p",{className:"font-medium",children:s("No categories")}),e.jsx("p",{className:"text-sm",children:s("Categories will appear here")})]})})]})]})]})})}export{oe as default};
