import{r as o,j as e}from"./ui-Ps9nvBG1.js";import{K as H,L as q,G as E,g as L,B as h,t as d,C as r,d as i,a as y,b as f,q as K,D as O,l as z,n as B,o as F,I as J}from"./app-BTt_gkO3.js";import{I as Q}from"./invoice-payment-form-DWi7BJoK.js";import{S as X}from"./shield-D21jpLkF.js";import{B as Y}from"./building-2-CVOsE0mA.js";import{U as Z}from"./user-DZ3jVi18.js";import{C as ee}from"./calendar-pZCS8WPy.js";import{C as se}from"./clock-NAV_RQL_.js";import{C as a}from"./credit-card-BwPrmecT.js";import{I as v,B as ae}from"./indian-rupee-CXBAgLWO.js";import{C as te}from"./coins-QSIO91L8.js";import{W as le}from"./wallet-CH1oYh2R.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./react-stripe.esm-BlLEi23z.js";import"./loader-circle-LF6za7Wc.js";function ke(){var P,S,_,T,A,M;const{invoice:s,enabledGateways:j,remainingAmount:n,company:p,favicon:w,appName:re}=H().props;console.log("Invoice data:",s),console.log("Project data:",s==null?void 0:s.project);const[m,k]=o.useState(null),[C,N]=o.useState(!1),[U,u]=o.useState(!1),[$,I]=o.useState(!1),[c,g]=o.useState(n||s.total_amount||0),R=t=>({bank:e.jsx(ae,{className:"h-5 w-5"}),stripe:e.jsx(a,{className:"h-5 w-5"}),paypal:e.jsx(a,{className:"h-5 w-5"}),razorpay:e.jsx(v,{className:"h-5 w-5"}),paystack:e.jsx(a,{className:"h-5 w-5"}),flutterwave:e.jsx(a,{className:"h-5 w-5"}),paytabs:e.jsx(a,{className:"h-5 w-5"}),skrill:e.jsx(le,{className:"h-5 w-5"}),coingate:e.jsx(te,{className:"h-5 w-5"}),payfast:e.jsx(a,{className:"h-5 w-5"}),tap:e.jsx(a,{className:"h-5 w-5"}),xendit:e.jsx(a,{className:"h-5 w-5"}),paytr:e.jsx(a,{className:"h-5 w-5"}),mollie:e.jsx(a,{className:"h-5 w-5"}),toyyibpay:e.jsx(a,{className:"h-5 w-5"}),cashfree:e.jsx(v,{className:"h-5 w-5"}),khalti:e.jsx(a,{className:"h-5 w-5"}),iyzipay:e.jsx(a,{className:"h-5 w-5"}),benefit:e.jsx(a,{className:"h-5 w-5"}),ozow:e.jsx(a,{className:"h-5 w-5"}),easebuzz:e.jsx(v,{className:"h-5 w-5"}),authorizenet:e.jsx(a,{className:"h-5 w-5"}),fedapay:e.jsx(a,{className:"h-5 w-5"}),payhere:e.jsx(a,{className:"h-5 w-5"}),cinetpay:e.jsx(a,{className:"h-5 w-5"}),paiement:e.jsx(a,{className:"h-5 w-5"}),yookassa:e.jsx(a,{className:"h-5 w-5"}),aamarpay:e.jsx(a,{className:"h-5 w-5"}),midtrans:e.jsx(a,{className:"h-5 w-5"}),paymentwall:e.jsx(a,{className:"h-5 w-5"}),sspay:e.jsx(a,{className:"h-5 w-5"})})[t]||e.jsx(a,{className:"h-5 w-5"}),G=(j==null?void 0:j.map(t=>({...t,icon:R(t.id)})))||[],l=t=>`$${(typeof t=="number"?t:parseFloat(t)).toFixed(2)}`,x=new Date(s.due_date)<new Date,D=()=>{N(!1),k(null)},V=()=>{d.success("Payment successful"),D(),setTimeout(()=>{window.location.reload()},1500)},W=()=>!m||!C?null:e.jsx(Q,{invoiceToken:s.payment_token,amount:c,paymentMethod:m,onSuccess:V,onCancel:D});return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:`Invoice - ${(p==null?void 0:p.name)||"Taskly SaaS"}`,children:w&&e.jsx("link",{rel:"icon",type:"image/x-icon",href:w})}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 p-3 rounded-xl shadow-lg",children:e.jsx(E,{className:"h-7 w-7 text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:["Invoice #",s.invoice_number]}),e.jsxs("p",{className:"text-gray-600 text-sm sm:text-base flex items-center mt-1",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),"Secure Payment Portal"]})]})]}),e.jsxs(L,{variant:x?"destructive":"secondary",className:"text-xs sm:text-sm px-3 py-1.5 font-medium",children:[x?"Overdue":"Due"," ",new Date(s.due_date).toLocaleDateString()]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoice Details"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage your invoice"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(h,{variant:"outline",className:"h-10 px-4 text-sm font-medium relative",onClick:async()=>{try{await navigator.clipboard.writeText(window.location.href),I(!0),setTimeout(()=>I(!1),2e3),d.success("Link copied to clipboard!")}catch{d.error("Failed to copy link. Please try again.")}},children:$?e.jsx("span",{className:"flex items-center text-green-600",children:"âœ“ Copied!"}):"ðŸ“‹ Copy Link"})})]}),e.jsx(r,{className:"mb-8 border-0 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[s.invoice_number," ",(P=s.client)==null?void 0:P.name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Invoice for professional services and software licenses."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(L,{variant:s.status==="paid"?"default":"outline",className:`mb-2 ${s.status==="paid"?"bg-green-100 text-green-800":s.status==="partial_paid"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status==="paid"?"Paid":s.status==="partial_paid"?"Partial Paid":"Unpaid"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.invoice_number})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(r,{className:"border-l-4 border-l-green-500 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"TOTAL AMOUNT"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:l(s.total_amount)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx("span",{className:"text-green-600 text-xl",children:"ðŸ’°"})})]})})}),e.jsx(r,{className:"border-l-4 border-l-blue-500 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"PAID AMOUNT"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:l(s.total_amount-n||0)})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx("span",{className:"text-blue-600 text-xl",children:"ðŸ’³"})})]})})}),e.jsx(r,{className:"border-l-4 border-l-red-500 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"DUE AMOUNT"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:l(n)})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx("span",{className:"text-red-600 text-xl",children:"â°"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(r,{className:"border-l-4 border-l-purple-500 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"INVOICE ITEMS"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:((S=s.items)==null?void 0:S.length)||1})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx("span",{className:"text-purple-600 text-xl",children:"ðŸ“¦"})})]})})}),e.jsx(r,{className:"border-l-4 border-l-orange-500 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"INVOICE DATE"}),e.jsx("p",{className:"text-lg font-bold text-orange-600 mt-1",children:new Date(s.invoice_date).toLocaleDateString()})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:e.jsx("span",{className:"text-orange-600 text-xl",children:"ðŸ“…"})})]})})}),e.jsx(r,{className:"border-l-4 border-l-yellow-500 shadow-sm",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"DUE DATE"}),e.jsx("p",{className:"text-lg font-bold text-yellow-600 mt-1",children:new Date(s.due_date).toLocaleDateString()})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx("span",{className:"text-yellow-600 text-xl",children:"ðŸ“‹"})})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(r,{className:"shadow-xl border-0 overflow-hidden",children:[e.jsx(y,{className:"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white",children:e.jsxs(f,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("span",{children:"Invoice Information"})]})}),e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Z,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide",children:"Bill To"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:(_=s.client)==null?void 0:_.name}),((T=s.client)==null?void 0:T.email)&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.client.email})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(E,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide",children:s.title?"Invoice Title":"Project"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:s.title||((A=s.project)==null?void 0:A.name)||s.project_name||"No Project"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(ee,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide",children:"Invoice Date"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:new Date(s.invoice_date).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${x?"bg-red-100":"bg-orange-100"}`,children:e.jsx(se,{className:`h-5 w-5 ${x?"text-red-600":"text-orange-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide",children:"Due Date"}),e.jsx("p",{className:`text-lg font-semibold mt-1 ${x?"text-red-600":"text-gray-900"}`,children:new Date(s.due_date).toLocaleDateString()})]})]})]})]})})]}),s.items&&s.items.length>0&&e.jsxs(r,{className:"shadow-sm border-0 overflow-hidden",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsxs(f,{className:"flex items-center space-x-2 text-lg text-gray-900",children:[e.jsx("span",{children:"ðŸ“¦"}),e.jsx("span",{children:"Invoice Items"})]})}),e.jsxs(i,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Invoice Items"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"Rate"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"Total Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.items.map((t,b)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:t.description}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 text-right font-medium",children:l(t.rate)}),e.jsx("td",{className:"px-6 py-4 text-sm font-bold text-green-600 text-right",children:l(t.amount)})]},b))})]})}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 px-6 py-6 border-t",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Subtotal"}),e.jsx("span",{className:"font-semibold text-gray-900",children:l(s.subtotal||s.total_amount)})]}),s.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Discount"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",l(s.discount_amount)]})]}),s.tax_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Tax"}),e.jsx("span",{className:"font-semibold text-gray-900",children:l(s.tax_amount)})]}),e.jsx(K,{className:"my-3"}),e.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[e.jsx("span",{className:"text-gray-900",children:"Total"}),e.jsx("span",{className:"text-blue-600",children:l(s.total_amount)})]})]})})]})]}),e.jsxs(r,{className:"shadow-sm border-0",children:[e.jsx(y,{className:"bg-gray-50 border-b",children:e.jsx(f,{className:"text-lg text-gray-900",children:"Additional Information"})}),e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"NOTES"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.notes||"Thank you for your business. Please remit payment by due date."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"TERMS"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.terms||"Net 30 days. Late payment fee of 1.5% per month applies."})]})]})})]})]})]}),e.jsx(O,{open:U,onOpenChange:u,children:e.jsxs(z,{className:"max-w-md max-h-[80vh]",children:[e.jsx(B,{children:e.jsxs(F,{className:"text-center",children:["Pay Invoice #",s.invoice_number]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-blue-700",children:["Invoice #",s.invoice_number]}),e.jsx("span",{className:"font-bold text-blue-900",children:l(s.total_amount)})]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:(M=s.client)==null?void 0:M.name}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Remaining: ",l(n)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Payment Amount"}),e.jsx(J,{type:"number",step:"0.01",min:"0.01",max:n,value:c,onChange:t=>g(Number(t.target.value)),placeholder:"Enter amount to pay",className:"w-full"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(h,{variant:"outline",size:"sm",onClick:()=>g(n/2),children:"50%"}),e.jsx(h,{variant:"outline",size:"sm",onClick:()=>g(n),children:"Full Amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-3 block",children:"Select Payment Method"}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:G.map(t=>e.jsxs("div",{className:`flex items-center p-4 border rounded-lg cursor-pointer transition-all ${m===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>k(t.id),children:[e.jsx("div",{className:"text-primary mr-3",children:t.icon}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(h,{variant:"outline",className:"flex-1 h-12 bg-gray-800 text-white border-gray-800 hover:bg-gray-700",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(h,{className:"flex-1 h-12 bg-blue-600 hover:bg-blue-700",onClick:()=>{if(!m){d.error("Please select a payment method first.");return}if(!c||c<=0){d.error("Please enter a valid payment amount.");return}if(c>n){d.error("Payment amount cannot exceed remaining balance.");return}u(!1),N(!0)},disabled:!m||!c||c<=0,children:["Pay ",l(c)]})]})]})]})}),e.jsx(O,{open:C,onOpenChange:N,children:e.jsxs(z,{className:"max-w-md",children:[e.jsx(B,{children:e.jsx(F,{className:"text-center",children:"Complete Payment"})}),W()]})})]})]})}export{ke as default};
