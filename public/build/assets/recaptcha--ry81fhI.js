import{r as n,j as o}from"./ui-Ps9nvBG1.js";import{K as f}from"./app-BTt_gkO3.js";function b({onVerify:i,onExpired:h,onError:e}){const{settings:c={}}=f().props,s=n.useRef(null),[d,u]=n.useState(!1),p=c.recaptchaEnabled==="true"||c.recaptchaEnabled===!0||c.recaptchaEnabled===1||c.recaptchaEnabled==="1",r=c.recaptchaVersion||"v2",t=c.recaptchaSiteKey||"";return n.useEffect(()=>{if(!p||!t)return;const l=()=>{window.grecaptcha&&s.current&&!d&&window.grecaptcha.ready(()=>{try{r==="v2"?window.grecaptcha.render(s.current,{sitekey:t,callback:i,"expired-callback":h,"error-callback":e}):window.grecaptcha.execute(t,{action:"submit"}).then(i).catch(e),u(!0)}catch(a){console.error("ReCaptcha render error:",a),e==null||e()}})};if(window.grecaptcha)l();else{const a=document.createElement("script");a.src=`https://www.google.com/recaptcha/api.js?render=${r==="v3"?t:"explicit"}`,a.onload=l,a.onerror=()=>e==null?void 0:e(),document.head.appendChild(a)}},[p,t,r,d]),!p||!t?null:r==="v2"?o.jsx("div",{ref:s}):null}export{b as R};
