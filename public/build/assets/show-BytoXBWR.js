import{r as c,j as e}from"./ui-Ps9nvBG1.js";import{P as L}from"./page-template-BeQadk1c.js";import{u as R,K as F,t as i,C as x,a as p,b as u,d as h,e as a,g as I,B as k,f as l}from"./app-BTt_gkO3.js";import{T as B}from"./textarea-DPiv_-Qc.js";import{S as O,a as P,b as q,c as V,d as n}from"./select-z0EzYxFC.js";import{C as $}from"./CrudDeleteModal-CAwcbZOF.js";import{S as H}from"./square-pen-BE6Ef4zh.js";import{T as K}from"./trash-2-WsAE_ige.js";import{U as z}from"./user-DZ3jVi18.js";import{M as G}from"./mail-CZ8KgBhk.js";import{M as J}from"./message-square-DGoN5Yg5.js";import{C as Q}from"./calendar-pZCS8WPy.js";import"./vendor-B1hewrmX.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./chevron-up-CaRG6751.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./settings-CG31wyPI.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./index-C9qibMqK.js";function Me(){var N,S,y,v;const{t}=R(),{contact:s,flash:r}=F().props,[w,d]=c.useState(!1),[g,C]=c.useState(s.status),[j,b]=c.useState(s.admin_notes||""),[f,o]=c.useState(!1);c.useEffect(()=>{r!=null&&r.success&&i.success(r.success),r!=null&&r.error&&i.error(r.error)},[r]);const D=()=>{o(!0),l.put(route("contacts.update-status",s.id),{status:g,admin_notes:j},{onSuccess:()=>{o(!1),i.success(t("Contact status updated successfully"))},onError:()=>{o(!1),i.error(t("Failed to update contact status"))}})},_=()=>{l.get(route("contacts.index"),{},{onSuccess:()=>{}})},T=()=>{d(!0)},U=()=>{i.loading(t("Deleting contact...")),l.delete(route("contacts.destroy",s.id),{onSuccess:()=>{i.dismiss(),l.get(route("contacts.index"))},onError:()=>{i.dismiss(),i.error(t("Failed to delete contact")),d(!1)}})},A=m=>{switch(m){case"new":return"bg-blue-100 text-blue-800";case"read":return"bg-yellow-100 text-yellow-800";case"replied":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=[{label:t("Edit"),icon:e.jsx(H,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:_},{label:t("Delete"),icon:e.jsx(K,{className:"h-4 w-4 mr-2"}),variant:"destructive",onClick:T}],E=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Contacts"),href:route("contacts.index")},{title:s.name}];return e.jsxs(L,{title:t("Contact Details"),url:`/contacts/${s.id}`,actions:M,breadcrumbs:E,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),t("Contact Information")]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Name")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Email")}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-sm text-blue-600 hover:text-blue-800",children:s.email})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Subject")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s.subject})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Message")}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.message})})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),t("Status & Actions")]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Current Status")}),e.jsx("div",{className:"mt-1",children:e.jsx(I,{className:A(s.status),children:t(s.status.charAt(0).toUpperCase()+s.status.slice(1))})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"status",children:t("Update Status")}),e.jsxs(O,{value:g,onValueChange:C,children:[e.jsx(P,{children:e.jsx(q,{})}),e.jsxs(V,{children:[e.jsx(n,{value:"new",children:t("New")}),e.jsx(n,{value:"read",children:t("Read")}),e.jsx(n,{value:"replied",children:t("Replied")}),e.jsx(n,{value:"closed",children:t("Closed")})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"admin_notes",children:t("Admin Notes")}),e.jsx(B,{id:"admin_notes",value:j,onChange:m=>b(m.target.value),placeholder:t("Add internal notes about this contact..."),rows:4})]}),e.jsx(k,{onClick:D,disabled:f,className:"w-full",children:t(f?"Updating...":"Update Status")})]})]}),e.jsxs(x,{children:[e.jsx(p,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),t("Metadata")]})}),e.jsxs(h,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Created At")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((N=window.appSettings)==null?void 0:N.formatDateTime(s.created_at))||new Date(s.created_at).toLocaleString()})]}),s.read_at&&e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Read At")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((S=window.appSettings)==null?void 0:S.formatDateTime(s.read_at))||new Date(s.read_at).toLocaleString()})]}),s.replied_at&&e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Replied At")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((y=window.appSettings)==null?void 0:y.formatDateTime(s.replied_at))||new Date(s.replied_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-sm font-medium text-gray-500",children:t("Last Updated")}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((v=window.appSettings)==null?void 0:v.formatDateTime(s.updated_at))||new Date(s.updated_at).toLocaleString()})]})]})]})]})]}),e.jsx($,{isOpen:w,onClose:()=>d(!1),onConfirm:U,itemName:s.name,entityName:"contact"})]})}export{Me as default};
