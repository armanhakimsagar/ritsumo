import{r as m,j as e}from"./ui-Ps9nvBG1.js";import{u as V,K,t as S,L as U,C as i,a as C,B as o,b as q,g as T,d as n,h as W,P as y,f as O}from"./app-BTt_gkO3.js";import{P as G,f as J}from"./page-template-BeQadk1c.js";import{T as M}from"./TimeEntryForm-Bcc_Wmjo.js";import{C as Q}from"./chevron-left-BAvb6WGn.js";import{C as E}from"./clock-NAV_RQL_.js";import{C as X}from"./calendar-pZCS8WPy.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./textarea-DPiv_-Qc.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";import"./checkbox-ux8-2I9a.js";function Le({weekData:c,projects:F,weekStart:x,weekEnd:H,timesheetId:L,permissions:Y}){const{t:r}=V(),{flash:a,auth:d}=K().props,h=(d==null?void 0:d.permissions)||[],[p,u]=m.useState(new Date(x)),[P,g]=m.useState(!1),[B,j]=m.useState("");m.useEffect(()=>{a!=null&&a.success&&S.success(a.success),a!=null&&a.error&&S.error(a.error)},[a]);const N=t=>{const s=new Date(p);s.setDate(s.getDate()+(t==="next"?7:-7)),u(s);const l=s.toISOString().split("T")[0];O.get(route("timesheets.weekly-view"),{week_start:l},{preserveState:!0})},_=()=>{const t=new Date,s=new Date(t.setDate(t.getDate()-t.getDay()));u(s);const l=s.toISOString().split("T")[0];O.get(route("timesheets.weekly-view"),{week_start:l},{preserveState:!0})},f=t=>{j(t),g(!0)},v=()=>c.reduce((t,s)=>t+s.totalHours,0),A=()=>c.reduce((t,s)=>t+s.billableHours,0),b=()=>c.reduce((t,s)=>t+s.entries.length,0),w=()=>{const t=new Date(x),s=new Date(H);return`${t.toLocaleDateString()} - ${s.toLocaleDateString()}`},I=t=>new Date(t).toLocaleDateString("en-US",{weekday:"short"}),$=t=>new Date(t).getDate(),D=t=>new Date(t).toDateString()===new Date().toDateString(),k=()=>{const t=new Date;return new Date(t.setDate(t.getDate()-t.getDay())).toDateString()===p.toDateString()},z=[],R=[{title:r("Dashboard"),href:route("dashboard")},{title:r("Timesheets"),href:route("timesheets.index")},{title:r("Weekly View")}];return e.jsxs(G,{title:r("Weekly Time Tracking"),actions:z,breadcrumbs:R,children:[e.jsx(U,{title:`Weekly View - ${w()}`}),e.jsx(i,{className:"mb-6",children:e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"outline",size:"icon",onClick:()=>N("prev"),children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx("div",{className:"text-center",children:e.jsxs(q,{className:"text-xl",children:[w(),k()&&e.jsx(T,{className:"ml-2",children:r("Current Week")})]})}),e.jsx(o,{variant:"outline",size:"icon",onClick:()=>N("next"),children:e.jsx(J,{className:"h-4 w-4"})})]}),!k()&&e.jsx(o,{variant:"outline",onClick:_,children:r("Current Week")})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(i,{children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:r("Total Hours")})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[v().toFixed(2),"h"]})]})}),e.jsx(i,{children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:r("Billable Hours")})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[A().toFixed(2),"h"]})]})}),e.jsx(i,{children:e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium text-purple-600",children:r("Entries")})}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:b()})]})}),e.jsx(i,{children:e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium text-orange-600",children:r("Avg/Day")})}),e.jsxs("div",{className:"text-2xl font-bold text-orange-900",children:[(v()/7).toFixed(1),"h"]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-4",children:c.map(t=>e.jsxs(i,{className:`${D(t.date)?"ring-2 ring-blue-500":""}`,children:[e.jsx(C,{className:"pb-2",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:I(t.date)}),e.jsxs("div",{className:"text-lg font-bold",children:[$(t.date),D(t.date)&&e.jsx(T,{variant:"secondary",className:"ml-1 text-xs",children:r("Today")})]})]})}),e.jsxs(n,{className:"space-y-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t.totalHours.toFixed(1),"h"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.billableHours.toFixed(1),"h ",r("billable")]})]}),e.jsxs("div",{className:"space-y-1",children:[t.entries.slice(0,3).map((s,l)=>e.jsxs("div",{className:"text-xs p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"font-medium truncate",children:s.project.title}),e.jsxs("div",{className:"text-muted-foreground",children:[s.hours,"h ",s.is_billable&&"ðŸ’°"]})]},l)),t.entries.length>3&&e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["+",t.entries.length-3," ",r("more")]})]}),W(h,"timesheet_create")&&e.jsxs(o,{size:"sm",variant:"outline",className:"w-full",onClick:()=>f(t.date),children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),r("Add")]})]})]},t.date))}),b()===0&&e.jsx(i,{className:"mt-6",children:e.jsxs(n,{className:"p-8 text-center",children:[e.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:r("No time entries this week")}),e.jsx("p",{className:"text-gray-500 mb-4",children:r("Start tracking your time to see your weekly overview")}),W(h,"timesheet_create")&&e.jsxs(o,{onClick:()=>f(new Date().toISOString().split("T")[0]),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),r("Add Time Entry")]})]})}),e.jsx(M,{isOpen:P,onClose:()=>{g(!1),j("")},timesheetId:L,projects:F,selectedDate:B})]})}export{Le as default};
