import{r as n,j as e}from"./ui-Ps9nvBG1.js";import{K as N,m as _,t as c,f as l,L as S,C as T,a as W,b as L,c as P,d as D,B as p,e as x,I as $,P as A}from"./app-BTt_gkO3.js";import{T as E}from"./textarea-DPiv_-Qc.js";import{A as k,a as w}from"./alert-CnBrcYs9.js";import{P as q}from"./page-template-BeQadk1c.js";import{B}from"./building-2-CVOsE0mA.js";import{T as F}from"./triangle-alert-BuDHDWvi.js";import{I}from"./info-CWa1AAnn.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./use-favicon-vjALIuby.js";function fe(){const{t}=useTranslation(),{errors:i}=N().props,{data:d,setData:u,post:j,processing:h,errors:o}=_({name:"",description:""}),[r,f]=n.useState(null),[m,C]=n.useState(!0);n.useEffect(()=>{i!=null&&i.error&&c.error(i.error,{duration:6e3,action:i.error.includes("Upgrade")?{label:"View Plans",onClick:()=>l.visit("/plans")}:void 0})},[i]),n.useEffect(()=>{g()},[]);const g=async()=>{var s;try{const a=await fetch(route("workspaces.check-limits"),{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""}});if(a.ok){const v=await a.json();f(v)}}catch(a){console.error("Failed to check workspace limits:",a)}finally{C(!1)}},y=s=>{if(s.preventDefault(),r&&!r.can_create){c.error(r.message||t("Cannot create workspace due to plan limits"),{duration:6e3,action:{label:t("Upgrade Plan"),onClick:()=>l.visit("/plans")}});return}j(route("workspaces.store"),{onSuccess:()=>{c.success(t("Workspace created successfully!"))},onError:a=>{a.error&&c.error(a.error,{duration:6e3,action:a.error.includes("Upgrade")?{label:t("View Plans"),onClick:()=>l.visit(route("plans.index"))}:void 0})}})},b=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Workspaces"),href:route("workspaces.index")},{title:t("Create")}];return e.jsxs(q,{title:t("Create New Workspace"),subtitle:t("Set up a new workspace to organize your projects and collaborate with your team"),url:"/workspaces/create",breadcrumbs:b,children:[e.jsx(S,{title:t("Create Workspace")}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(T,{children:[e.jsxs(W,{children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-6 h-6 text-blue-600"}),t("Workspace Details")]}),e.jsx(P,{children:t("Provide basic information about your new workspace. You can always update these details later.")})]}),e.jsxs(D,{children:[!m&&r&&e.jsx("div",{className:"mb-6",children:r.can_create?e.jsxs(k,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(w,{children:r.is_unlimited?`You have unlimited workspaces on your ${r.plan_name} plan. Currently using ${r.current_workspaces} workspace${r.current_workspaces!==1?"s":""}.`:`You can create ${r.remaining_workspaces} more workspace${r.remaining_workspaces!==1?"s":""} on your ${r.plan_name} plan (${r.current_workspaces}/${r.workspace_limit} used).`})]}):e.jsxs(k,{variant:"destructive",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs(w,{children:[r.message,(r.error_type==="workspace_limit_reached"||r.error_type==="plan_expired")&&e.jsx(p,{variant:"link",className:"p-0 h-auto ml-2 text-red-600 underline",onClick:()=>l.visit("/plans"),children:t("Upgrade your plan")})]})]})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(x,{htmlFor:"name",className:"text-sm font-medium",children:[t("Workspace Name")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($,{id:"name",type:"text",value:d.name,onChange:s=>u("name",s.target.value),placeholder:t("e.g., My Company, Project Alpha, Team Workspace"),className:"mt-1",required:!0}),o.name&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:o.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("Choose a descriptive name that your team will recognize.")})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",className:"text-sm font-medium",children:t("Description")}),e.jsx(E,{id:"description",value:d.description,onChange:s=>u("description",s.target.value),placeholder:t("Describe the purpose of this workspace, what projects it will contain, or any other relevant information..."),rows:4,className:"mt-1"}),o.description&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:o.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("Optional: Help your team understand what this workspace is for.")})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsxs(p,{type:"submit",disabled:h||m||r&&!r.can_create,className:"flex-1",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),t(h?"Creating Workspace...":m?"Checking Limits...":"Create Workspace")]}),e.jsx(p,{type:"button",variant:"outline",onClick:()=>window.history.back(),className:"px-6",children:t("Cancel")})]})]})]})]})})]})}export{fe as default};
