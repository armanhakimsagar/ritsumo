import{r as u,j as e}from"./ui-Ps9nvBG1.js";import{P as Ee,L as qe}from"./page-template-BeQadk1c.js";import{u as pe,D as Ae,l as Re,n as Ue,o as $e,p as Ve,e as I,g as He,H as Be,B as o,K as Ge,t as i,P as Ke,S as re,I as We,f as x,i as C,j as y,k as _,C as Je}from"./app-BTt_gkO3.js";import{S as te,a as ae,b as ie,c as le,d as k}from"./select-z0EzYxFC.js";import{D as Qe,a as Xe,b as Ye,c as N,d as Ze}from"./dropdown-menu-CvJwe1WI.js";import{u as es}from"./use-initials-BPIvssA7.js";import{D as ne}from"./date-picker-B-c0ShZi.js";import{C as de}from"./CrudFormModal-CIUswiAq.js";import{C as ss}from"./CrudDeleteModal-CAwcbZOF.js";import{R as rs,a as ts}from"./radio-group-JdhkNCQh.js";import{C as as}from"./circle-B-lwSO-9.js";import{C as F}from"./credit-card-BwPrmecT.js";import{C as is}from"./circle-check-B5E119oN.js";import{E as oe}from"./eye-BGcEqodV.js";import{F as ls}from"./filter-C99mLYzj.js";import{L as ns}from"./list-D1IfOmxs.js";import{A as ce,K as me,L as xe}from"./lock-open-B07HE5u7.js";import{I as ue}from"./info-CWa1AAnn.js";import{L as he}from"./lock-BlSlbQY6.js";import{S as G}from"./square-pen-BE6Ef4zh.js";import{T as K}from"./trash-2-WsAE_ige.js";import"./vendor-B1hewrmX.js";import"./textarea-DPiv_-Qc.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./globe-BYIVGjA8.js";import"./chevron-up-CaRG6751.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./index-C9qibMqK.js";import"./calendar-pZCS8WPy.js";import"./checkbox-ux8-2I9a.js";import"./scroll-area-B8km6OEG.js";function ds({isOpen:r,onClose:D,onConfirm:l,plans:w,currentPlanId:d,companyName:b}){const{t}=pe(),[p,S]=u.useState(null);u.useEffect(()=>{if(r&&w&&w.length>0){const n=w.find(h=>h.is_current===!0);S(n?n.id:d||w[0].id)}},[r,w,d]);const L=()=>{p&&l(p)};return e.jsx(Ae,{open:r,onOpenChange:D,children:e.jsxs(Re,{className:"sm:max-w-lg",children:[e.jsxs(Ue,{children:[e.jsxs($e,{children:[t("Upgrade Plan for")," ",b]}),e.jsx(Ve,{children:t("Select a new plan for this company")})]}),e.jsx("div",{className:"py-4",children:e.jsx(rs,{value:(p==null?void 0:p.toString())||"",onValueChange:n=>S(parseInt(n)),className:"space-y-4",children:e.jsx("div",{className:"space-y-4",children:w.map(n=>e.jsxs("div",{className:`relative flex items-center space-x-3 rounded-lg border p-4 ${p===n.id?"border-primary bg-primary/5":"border-gray-200"} ${n.is_current?"bg-blue-50":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(ts,{value:n.id.toString(),id:`plan-${n.id}`,className:"h-5 w-5"}),p===n.id&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx(as,{className:"h-2.5 w-2.5 fill-primary text-primary"})})]}),e.jsx(I,{htmlFor:`plan-${n.id}`,className:"flex flex-1 cursor-pointer items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-base font-medium",children:n.name}),n.is_current&&e.jsx(He,{variant:"outline",className:"ml-2 bg-blue-100 text-blue-800 border-blue-200",children:t("Current")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),e.jsxs("p",{className:"text-sm font-medium",children:[n.price," / ",n.duration.toLowerCase()]})]}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),n.features&&n.features.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.features.map((h,O)=>e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(is,{className:"mr-1 h-3 w-3 text-green-500"}),h]},O))})]})})]},n.id))})})}),e.jsxs(Be,{children:[e.jsx(o,{variant:"outline",onClick:D,children:t("Cancel")}),e.jsx(o,{onClick:L,disabled:!p||p===d,children:t("Upgrade Plan")})]})]})})}function ar(){var X,Y,Z,ee,se;const{t:r}=pe(),{auth:D,companies:l,plans:w,filters:d={},isSaasMode:b=!0,flash:t}=Ge().props,p=(D==null?void 0:D.permissions)||[],S=es(),[L,n]=u.useState("list"),[h,O]=u.useState(d.search||""),[g,M]=u.useState(d.start_date?new Date(d.start_date):void 0),[f,z]=u.useState(d.end_date?new Date(d.end_date):void 0),[v,W]=u.useState(d.status||"all"),[E,J]=u.useState(!1),[je,P]=u.useState(!1),[ge,q]=u.useState(!1),[fe,A]=u.useState(!1),[ve,R]=u.useState(!1),[c,U]=u.useState(null),[Ne,be]=u.useState([]),[T,$]=u.useState("create");u.useEffect(()=>{t!=null&&t.success&&i.success(t.success),t!=null&&t.error&&i.error(t.error)},[t]);const V=()=>v!=="all"||h!==""||g!==void 0||f!==void 0,we=()=>(v!=="all"?1:0)+(h?1:0)+(g?1:0)+(f?1:0),Se=s=>{s.preventDefault(),Q()},Q=()=>{const s={page:1};h&&(s.search=h),v!=="all"&&(s.status=v),g&&(s.start_date=g.toISOString().split("T")[0]),f&&(s.end_date=f.toISOString().split("T")[0]),d.per_page&&(s.per_page=d.per_page),x.get(route("companies.index"),s,{preserveState:!0,preserveScroll:!0})},Ce=s=>{W(s);const a={page:1};h&&(a.search=h),s!=="all"&&(a.status=s),g&&(a.start_date=g.toISOString().split("T")[0]),f&&(a.end_date=f.toISOString().split("T")[0]),d.per_page&&(a.per_page=d.per_page),x.get(route("companies.index"),a,{preserveState:!0,preserveScroll:!0})},ye=s=>{const a=d.sort_field===s&&d.sort_direction==="asc"?"desc":"asc",j={sort_field:s,sort_direction:a,page:1};h&&(j.search=h),v!=="all"&&(j.status=v),g&&(j.start_date=g.toISOString().split("T")[0]),f&&(j.end_date=f.toISOString().split("T")[0]),d.per_page&&(j.per_page=d.per_page),x.get(route("companies.index"),j,{preserveState:!0,preserveScroll:!0})},m=(s,a)=>{switch(U(a),s){case"login-as":x.get(route("impersonate.start",a.id));break;case"company-info":$("view"),P(!0);break;case"upgrade-plan":Te(a);break;case"plan-requests":p.includes("view-plan-requests")&&x.get(route("companies.plan-requests",a.id));break;case"plan-orders":p.includes("view-plan-orders")&&x.get(route("companies.plan-orders",a.id));break;case"reset-password":A(!0);break;case"toggle-status":Fe(a);break;case"edit":$("edit"),P(!0);break;case"delete":q(!0);break}},_e=()=>{U(null),$("create"),P(!0)},ke=s=>{T==="create"?(i.loading(r("Creating company...")),x.post(route("companies.store"),s,{onSuccess:()=>{P(!1),i.dismiss(),t!=null&&t.success&&i.success(t.success)},onError:a=>{i.dismiss(),t!=null&&t.error?i.error(t.error):i.error(r("Failed to create company")+`: ${Object.values(a).join(", ")}`)}})):T==="edit"&&(i.loading(r("Updating company...")),x.put(route("companies.update",c.id),s,{onSuccess:()=>{P(!1),i.dismiss(),t!=null&&t.success&&i.success(t.success)},onError:a=>{i.dismiss(),t!=null&&t.error?i.error(t.error):i.error(r("Failed to update company")+`: ${Object.values(a).join(", ")}`)}}))},De=()=>{i.loading(r("Deleting company...")),x.delete(route("companies.destroy",c.id),{onSuccess:()=>{q(!1),i.dismiss(),t!=null&&t.success&&i.success(t.success)},onError:s=>{i.dismiss(),t!=null&&t.error?i.error(t.error):i.error(r("Failed to delete company")+`: ${Object.values(s).join(", ")}`)}})},Pe=s=>{i.loading(r("Resetting password...")),x.put(route("companies.reset-password",c.id),s,{onSuccess:()=>{A(!1),i.dismiss(),t!=null&&t.success&&i.success(t.success)},onError:a=>{i.dismiss(),t!=null&&t.error?i.error(t.error):i.error(r("Failed to reset password")+`: ${Object.values(a).join(", ")}`)}})},Fe=s=>{i.loading(r("Updating status...")),x.put(route("companies.toggle-status",s.id),{},{onSuccess:()=>{i.dismiss(),t!=null&&t.success&&i.success(t.success)},onError:a=>{i.dismiss(),t!=null&&t.error?i.error(t.error):i.error(r("Failed to update status")+`: ${Object.values(a).join(", ")}`)}})},Le=()=>{W("all"),O(""),M(void 0),z(void 0),J(!1),x.get(route("companies.index"),{page:1,per_page:d.per_page},{preserveState:!0,preserveScroll:!0})},Te=s=>{U(s),i.loading(r("Loading plans...")),fetch(route("companies.plans",s.id)).then(a=>a.json()).then(a=>{be(a.plans),R(!0),i.dismiss()}).catch(a=>{i.dismiss(),i.error(r("Failed to load plans"))})},Ie=s=>{i.loading(r("Upgrading plan...")),x.put(route("companies.upgrade-plan",c.id),{plan_id:s},{onSuccess:()=>{R(!1),i.dismiss(),t!=null&&t.success&&i.success(t.success),x.reload()},onError:()=>{i.dismiss(),t!=null&&t.error?i.error(t.error):i.error(r("Failed to upgrade plan"))}})},Oe=()=>{x.get(route("users.all-logs"))},Me=[{label:r("User Logs History"),icon:e.jsx(oe,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>Oe()},{label:r("Add Company"),icon:e.jsx(Ke,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>_e()}],ze=[{title:r("Dashboard"),href:route("dashboard")},{title:r("Companies")}],H=[{key:"name",label:r("Name"),sortable:!0,render:(s,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary text-white",children:S(a.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.email})]})]})},...b?[{key:"plan_name",label:r("Plan"),render:s=>e.jsx("span",{className:"capitalize",children:s})}]:[],{key:"created_at",label:r("Created At"),sortable:!0,render:s=>{var a;return((a=window.appSettings)==null?void 0:a.formatDateTime(s,!1))||new Date(s).toLocaleDateString()}}];return e.jsxs(Ee,{title:r("Companies Management"),url:"/companies",actions:Me,breadcrumbs:ze,noPadding:!0,children:[e.jsx("div",{className:"bg-white rounded-lg shadow mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("form",{onSubmit:Se,className:"flex gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(re,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(We,{placeholder:r("Search companies..."),value:h,onChange:s=>O(s.target.value),className:"w-full pl-9"})]}),e.jsxs(o,{type:"submit",size:"sm",children:[e.jsx(re,{className:"h-4 w-4 mr-1.5"}),r("Search")]})]}),e.jsx("div",{className:"ml-2",children:e.jsxs(o,{variant:V()?"default":"outline",size:"sm",className:"h-8 px-2 py-1",onClick:()=>J(!E),children:[e.jsx(ls,{className:"h-3.5 w-3.5 mr-1.5"}),r(E?"Hide Filters":"Filters"),V()&&e.jsx("span",{className:"ml-1 bg-primary-foreground text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs",children:we()})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"border rounded-md p-0.5 mr-2",children:[e.jsx(o,{size:"sm",variant:L==="list"?"default":"ghost",className:"h-7 px-2",onClick:()=>n("list"),children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:L==="grid"?"default":"ghost",className:"h-7 px-2",onClick:()=>n("grid"),children:e.jsx(qe,{className:"h-4 w-4"})})]}),e.jsx(I,{className:"text-xs text-muted-foreground",children:r("Per Page:")}),e.jsxs(te,{value:((X=d.per_page)==null?void 0:X.toString())||"10",onValueChange:s=>{const a={page:1,per_page:parseInt(s)};h&&(a.search=h),v!=="all"&&(a.status=v),g&&(a.start_date=g.toISOString().split("T")[0]),f&&(a.end_date=f.toISOString().split("T")[0]),x.get(route("companies.index"),a,{preserveState:!0,preserveScroll:!0})},children:[e.jsx(ae,{className:"w-16 h-8",children:e.jsx(ie,{})}),e.jsxs(le,{children:[e.jsx(k,{value:"10",children:"10"}),e.jsx(k,{value:"25",children:"25"}),e.jsx(k,{value:"50",children:"50"}),e.jsx(k,{value:"100",children:"100"})]})]})]})]}),E&&e.jsx("div",{className:"w-full mt-3 p-4 bg-gray-50 border rounded-md",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:r("Status")}),e.jsxs(te,{value:v,onValueChange:Ce,children:[e.jsx(ae,{className:"w-40",children:e.jsx(ie,{placeholder:r("All Status")})}),e.jsxs(le,{children:[e.jsx(k,{value:"all",children:r("All Status")}),e.jsx(k,{value:"active",children:r("Active")}),e.jsx(k,{value:"inactive",children:r("Inactive")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:r("Start Date")}),e.jsx(ne,{selected:g,onSelect:M,onChange:s=>{M(s)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:r("End Date")}),e.jsx(ne,{selected:f,onSelect:z,onChange:s=>{z(s)}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"default",size:"sm",className:"h-9",onClick:Q,children:r("Apply Filters")}),e.jsx(o,{variant:"outline",size:"sm",className:"h-9",onClick:Le,disabled:!V(),children:r("Reset Filters")})]})]})})]})}),L==="list"?e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[H.map(s=>e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",onClick:()=>s.sortable&&ye(s.key),children:e.jsxs("div",{className:"flex items-center",children:[s.label,s.sortable&&e.jsx("span",{className:"ml-1",children:d.sort_field===s.key?d.sort_direction==="asc"?"↑":"↓":""})]})},s.key)),e.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:r("Actions")})]})}),e.jsxs("tbody",{children:[(Y=l==null?void 0:l.data)==null?void 0:Y.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-gray-800",children:[H.map(a=>e.jsx("td",{className:"px-4 py-3",children:a.render?a.render(s[a.key],s):s[a.key]},`${s.id}-${a.key}`)),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m("login-as",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx(_,{children:r("Login as Company")})]}),e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m("company-info",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsx(_,{children:r("Company Info")})]}),b&&e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m("upgrade-plan",s),className:"text-amber-500 hover:text-amber-700",children:e.jsx(F,{className:"h-4 w-4"})})}),e.jsx(_,{children:r("Upgrade Plan")})]}),e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m("reset-password",s),className:"text-blue-500 hover:text-blue-700",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsx(_,{children:r("Reset Password")})]}),e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m("toggle-status",s),className:"text-amber-500 hover:text-amber-700",children:s.status==="active"?e.jsx(he,{className:"h-4 w-4"}):e.jsx(xe,{className:"h-4 w-4"})})}),e.jsx(_,{children:s.status==="active"?r("Disable Login"):r("Enable Login")})]}),e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>m("edit",s),className:"text-amber-500 hover:text-amber-700",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx(_,{children:r("Edit")})]}),e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>m("delete",s),children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsx(_,{children:r("Delete")})]})]})})]},s.id)),(!(l!=null&&l.data)||l.data.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:H.length+1,className:"px-4 py-8 text-center text-gray-500",children:r("No companies found")})})]})]})}),e.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r("Showing")," ",e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.from)||0})," ",r("to")," ",e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.to)||0})," ",r("of")," ",e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.total)||0})," ",r("companies")]}),e.jsx("div",{className:"flex gap-1",children:(Z=l==null?void 0:l.links)==null?void 0:Z.map((s,a)=>{const j=s.label==="&laquo; Previous"||s.label==="Next &raquo;",B=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(o,{variant:s.active?"default":"outline",size:j?"sm":"icon",className:j?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>s.url&&x.get(s.url),children:j?B:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},a)})})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[(ee=l==null?void 0:l.data)==null?void 0:ee.map(s=>{var a;return e.jsx(Je,{className:"bg-white border border-gray-300 rounded-lg shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center text-lg font-bold text-gray-700",children:S(s.name)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.email}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${s.status==="active"?"bg-gray-800":"bg-gray-400"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.status==="active"?r("Active"):r("Inactive")})]})]})]}),e.jsxs(Qe,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(o,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"1"}),e.jsx("circle",{cx:"12",cy:"5",r:"1"}),e.jsx("circle",{cx:"12",cy:"19",r:"1"})]})})}),e.jsxs(Ye,{align:"end",className:"w-48 z-50",sideOffset:5,children:[e.jsxs(N,{onClick:()=>m("login-as",s),children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Login as Company")})]}),e.jsxs(N,{onClick:()=>m("company-info",s),children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Company Info")})]}),b&&e.jsxs(N,{onClick:()=>m("upgrade-plan",s),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Upgrade Plan")})]}),b&&p.includes("view-plan-requests")&&e.jsxs(N,{onClick:()=>m("plan-requests",s),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("My Plan Requests")})]}),b&&p.includes("view-plan-orders")&&e.jsxs(N,{onClick:()=>m("plan-orders",s),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("My Plan Orders")})]}),e.jsxs(N,{onClick:()=>m("reset-password",s),children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Reset Password")})]}),e.jsxs(N,{onClick:()=>m("toggle-status",s),children:[s.status==="active"?e.jsx(he,{className:"h-4 w-4 mr-2"}):e.jsx(xe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s.status==="active"?r("Disable Login"):r("Enable Login")})]}),e.jsx(Ze,{}),e.jsxs(N,{onClick:()=>m("edit",s),className:"text-amber-600",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Edit")})]}),e.jsxs(N,{onClick:()=>m("delete",s),className:"text-rose-600",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:r("Delete")})]})]})]})]}),b&&e.jsxs("div",{className:"border border-gray-200 rounded-md p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(F,{className:"h-4 w-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:s.plan_name})]}),s.plan_expiry_date&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:[r("Expires"),": ",((a=window.appSettings)==null?void 0:a.formatDateTime(s.plan_expiry_date,!1))||new Date(s.plan_expiry_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>m("edit",s),className:"flex-1 h-9 text-sm border-gray-300",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),r("Edit")]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>m("company-info",s),className:"flex-1 h-9 text-sm border-gray-300",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),r("View")]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>m("delete",s),className:"flex-1 h-9 text-sm text-gray-700 border-gray-300",children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),r("Delete")]})]})]})},s.id)}),(!(l!=null&&l.data)||l.data.length===0)&&e.jsx("div",{className:"col-span-full p-8 text-center text-gray-500",children:r("No companies found")})]}),e.jsxs("div",{className:"mt-6 bg-white p-4 rounded-lg shadow flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r("Showing")," ",e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.from)||0})," ",r("to")," ",e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.to)||0})," ",r("of")," ",e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.total)||0})," ",r("companies")]}),e.jsx("div",{className:"flex gap-1",children:(se=l==null?void 0:l.links)==null?void 0:se.map((s,a)=>{const j=s.label==="&laquo; Previous"||s.label==="Next &raquo;",B=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(o,{variant:s.active?"default":"outline",size:j?"sm":"icon",className:j?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>s.url&&x.get(s.url),children:j?B:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},a)})})]})]}),e.jsx(de,{isOpen:je,onClose:()=>P(!1),onSubmit:s=>{s.login_enabled===!1&&delete s.password,s.status=s.login_enabled?"active":"inactive",delete s.login_enabled,ke(s)},formConfig:{fields:[{name:"name",label:r("Company Name"),type:"text",required:!0},{name:"email",label:r("Email"),type:"email",required:!0},{name:"login_enabled",label:r("Enable Login"),placeholder:"",type:"switch",defaultValue:!0},{name:"password",label:r("Password"),type:"password",required:!0,conditional:(s,a)=>(a==null?void 0:a.login_enabled)===!0}],modalSize:"lg"},initialData:{...c,login_enabled:(c==null?void 0:c.status)==="active"},title:r(T==="create"?"Add New Company":T==="edit"?"Edit Company":"View Company"),mode:T}),e.jsx(ss,{isOpen:ge,onClose:()=>q(!1),onConfirm:De,itemName:(c==null?void 0:c.name)||"",entityName:"company"}),e.jsx(de,{isOpen:fe,onClose:()=>A(!1),onSubmit:Pe,formConfig:{fields:[{name:"password",label:r("New Password"),type:"password",required:!0}],modalSize:"sm"},initialData:{},title:r("Reset Password for")+` ${(c==null?void 0:c.name)||r("Company")}`,mode:"edit"}),e.jsx(ds,{isOpen:ve,onClose:()=>R(!1),onConfirm:Ie,plans:Ne,currentPlanId:c==null?void 0:c.plan_id,companyName:(c==null?void 0:c.name)||""})]})}export{ar as default};
