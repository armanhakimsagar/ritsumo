import{r as h,j as e}from"./ui-Ps9nvBG1.js";import{u as ke,K as Ce,t as u,P as ce,L as be,C as P,d as I,S as ne,I as _e,B as m,e as _,f as C,g as f,a as Te,b as Ae,z as Be,i as M,j as E,k as V}from"./app-BTt_gkO3.js";import{S as T,a as A,b as B,c as z,d as o}from"./select-z0EzYxFC.js";import{P as ze,L as Le,A as de,a as oe}from"./page-template-BeQadk1c.js";import{BugModal as De}from"./BugModal-n1AjsVSW.js";import{C as Fe}from"./CrudDeleteModal-CAwcbZOF.js";import{F as Pe}from"./filter-C99mLYzj.js";import{C as Ie}from"./columns-3-BJflJd0h.js";import{L as Me}from"./list-D1IfOmxs.js";import{G as Ee}from"./grip-vertical-1PuRD1LT.js";import{S as W}from"./square-pen-BE6Ef4zh.js";import{T as K}from"./trash-2-WsAE_ige.js";import{U as Ve}from"./user-DZ3jVi18.js";import{M as Ue}from"./message-square-DGoN5Yg5.js";import{P as qe}from"./paperclip-h_SfHoPk.js";import{B as U}from"./bug-DP5pb0Nw.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./textarea-DPiv_-Qc.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./settings-CG31wyPI.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";import"./tabs-D83PhGuv.js";import"./send-B0OsKa7V.js";import"./ellipsis-DhhTm3i6.js";import"./download-FY3rJJBK.js";import"./file-3AWHN2l6.js";function Fs({bugs:r,projects:J,statuses:L,members:xe,filters:p,userWorkspaceRole:Re,project_name:j,permissions:me}){var le,ie;const{t:c}=ke(),{flash:v,permissions:he}=Ce().props,l=me||he,[x,q]=h.useState(p.view||"kanban"),[g,Q]=h.useState(p.search||""),[y,X]=h.useState(p.project_id||"all"),[w,Y]=h.useState(p.status_id||"all"),[S,Z]=h.useState(p.priority||"all"),[k,ee]=h.useState(p.severity||"all"),[R,se]=h.useState(!1),[pe,ae]=h.useState(!1),[je,ue]=h.useState(null),[ve,D]=h.useState(!1),[b,F]=h.useState(null);h.useEffect(()=>{v!=null&&v.success&&u.success(v.success),v!=null&&v.error&&u.error(v.error)},[v]);const d=Array.isArray(r)?r:r.data,Ne=s=>{s.preventDefault(),te()},te=()=>{const s={page:1};g&&(s.search=g),y!=="all"&&(s.project_id=y),w!=="all"&&(s.status_id=w),S!=="all"&&(s.priority=S),k!=="all"&&(s.severity=k),x!=="kanban"&&p.per_page&&(s.per_page=p.per_page),s.view=x,j&&(s.project_name=j),C.get(route("bugs.index"),s,{preserveState:!1,preserveScroll:!1})};h.useEffect(()=>{x!==(p.view||"kanban")&&te()},[x]);const H=()=>y!=="all"||w!=="all"||S!=="all"||k!=="all"||g!=="",fe=()=>(y!=="all"?1:0)+(w!=="all"?1:0)+(S!=="all"?1:0)+(k!=="all"?1:0)+(g?1:0),ge=()=>{X("all"),Y("all"),Z("all"),ee("all"),Q(""),se(!1);const s={page:1,view:x};x!=="kanban"&&p.per_page&&(s.per_page=p.per_page),j&&(s.project_name=j),C.get(route("bugs.index"),s,{preserveState:!1,preserveScroll:!1})},O=s=>{const t={low:"bg-blue-100 text-blue-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"};return t[s]||t.medium},G=s=>{const t={minor:"bg-green-100 text-green-800",major:"bg-yellow-100 text-yellow-800",critical:"bg-orange-100 text-orange-800",blocker:"bg-red-100 text-red-800"};return t[s]||t.major},N=s=>{ue(s||null),ae(!0)},$=s=>{F(s),D(!0)},ye=()=>{b&&(u.loading("Deleting bug..."),C.delete(route("bugs.destroy",b.id),{onSuccess:()=>{u.dismiss(),D(!1),F(null)},onError:()=>{u.dismiss(),u.error("Failed to delete bug"),D(!1),F(null)}}))},we=(s,t)=>{u.loading("Updating bug status..."),C.put(route("bugs.change-status",s),{bug_status_id:t},{onSuccess:()=>{u.dismiss()},onError:()=>{u.dismiss(),u.error("Failed to update bug status")}})},re=[];l!=null&&l.create&&re.push({label:c("Report Bug"),icon:e.jsx(ce,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>N()});const Se=j?[{title:c("Dashboard"),href:route("dashboard")},{title:c("Projects"),href:route("projects.index")},{title:j},{title:c("Bugs")}]:[{title:c("Dashboard"),href:route("dashboard")},{title:c("Bugs")}];return e.jsxs(ze,{title:j?`${j} - ${c("Bugs")}`:c("Bugs"),url:"/bugs",actions:re,breadcrumbs:Se,noPadding:!0,children:[e.jsx(be,{title:c("Bugs")}),e.jsx(P,{className:"mb-4 hover:shadow-md transition-shadow",children:e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:Array.isArray(r)?r.length:(r==null?void 0:r.total)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:c("Total Bugs")})]}),L.slice(0,3).map((s,t)=>{const a=["text-orange-600","text-blue-600","text-green-600"];return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-xl font-bold ${a[t]||"text-gray-600"}`,children:(d==null?void 0:d.filter(n=>{var i;return((i=n.bug_status)==null?void 0:i.id)===s.id}).length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:s.name})]},s.id)}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:(d==null?void 0:d.filter(s=>s.priority==="critical"||s.severity==="blocker").length)||0}),e.jsx("div",{className:"text-xs text-gray-600",children:c("Critical")})]})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-4",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("form",{onSubmit:Ne,className:"flex gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(ne,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(_e,{placeholder:c("Search bugs..."),value:g,onChange:s=>Q(s.target.value),className:"w-full pl-9"})]}),e.jsxs(m,{type:"submit",size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-1.5"}),c("Search")]})]}),e.jsx("div",{className:"ml-2",children:e.jsxs(m,{variant:H()?"default":"outline",size:"sm",className:"h-8 px-2 py-1",onClick:()=>se(!R),children:[e.jsx(Pe,{className:"h-3.5 w-3.5 mr-1.5"}),c(R?"Hide Filters":"Filters"),H()&&e.jsx("span",{className:"ml-1 bg-primary-foreground text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs",children:fe()})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"border rounded-md p-0.5 mr-2",children:[e.jsx(m,{size:"sm",variant:x==="kanban"?"default":"ghost",className:"h-7 px-2",onClick:()=>q("kanban"),children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(m,{size:"sm",variant:x==="list"?"default":"ghost",className:"h-7 px-2",onClick:()=>q("list"),children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx(m,{size:"sm",variant:x==="grid"?"default":"ghost",className:"h-7 px-2",onClick:()=>q("grid"),children:e.jsx(Le,{className:"h-4 w-4"})})]}),x!=="kanban"&&e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"text-xs text-muted-foreground",children:"Per Page:"}),e.jsxs(T,{value:((le=p.per_page)==null?void 0:le.toString())||"20",onValueChange:s=>{const t={page:1,per_page:parseInt(s)};g&&(t.search=g),y!=="all"&&(t.project_id=y),w!=="all"&&(t.status_id=w),S!=="all"&&(t.priority=S),k!=="all"&&(t.severity=k),t.view=x,j&&(t.project_name=j),C.get(route("bugs.index"),t,{preserveState:!1,preserveScroll:!1})},children:[e.jsx(A,{className:"w-16 h-8",children:e.jsx(B,{})}),e.jsxs(z,{className:"z-[9999]",children:[e.jsx(o,{value:"20",children:"20"}),e.jsx(o,{value:"50",children:"50"}),e.jsx(o,{value:"100",children:"100"})]})]})]})]})]}),R&&e.jsx("div",{className:"w-full mt-3 p-4 bg-gray-50 border rounded-md",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Project"}),e.jsxs(T,{value:y,onValueChange:X,children:[e.jsx(A,{className:"w-40",children:e.jsx(B,{placeholder:"All Projects"})}),e.jsxs(z,{className:"z-[9999]",children:[e.jsx(o,{value:"all",children:"All Projects"}),J.map(s=>e.jsx(o,{value:s.id.toString(),children:s.title},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Status"}),e.jsxs(T,{value:w,onValueChange:Y,children:[e.jsx(A,{className:"w-32",children:e.jsx(B,{placeholder:"All Statuses"})}),e.jsxs(z,{className:"z-[9999]",children:[e.jsx(o,{value:"all",children:"All Statuses"}),L.map(s=>e.jsx(o,{value:s.id.toString(),children:s.name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Priority"}),e.jsxs(T,{value:S,onValueChange:Z,children:[e.jsx(A,{className:"w-32",children:e.jsx(B,{placeholder:"All Priorities"})}),e.jsxs(z,{className:"z-[9999]",children:[e.jsx(o,{value:"all",children:"All Priorities"}),e.jsx(o,{value:"low",children:"Low"}),e.jsx(o,{value:"medium",children:"Medium"}),e.jsx(o,{value:"high",children:"High"}),e.jsx(o,{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Severity"}),e.jsxs(T,{value:k,onValueChange:ee,children:[e.jsx(A,{className:"w-32",children:e.jsx(B,{placeholder:"All Severities"})}),e.jsxs(z,{className:"z-[9999]",children:[e.jsx(o,{value:"all",children:"All Severities"}),e.jsx(o,{value:"minor",children:"Minor"}),e.jsx(o,{value:"major",children:"Major"}),e.jsx(o,{value:"critical",children:"Critical"}),e.jsx(o,{value:"blocker",children:"Blocker"})]})]})]}),e.jsx(m,{variant:"outline",size:"sm",className:"h-9",onClick:ge,disabled:!H(),children:c("Reset Filters")})]})})]})}),x==="kanban"?e.jsxs("div",{className:"w-full",children:[e.jsx("style",{children:`
                        .kanban-scroll::-webkit-scrollbar {
                            height: 8px;
                        }
                        .kanban-scroll::-webkit-scrollbar-track {
                            background: #f1f5f9;
                            border-radius: 4px;
                        }
                        .kanban-scroll::-webkit-scrollbar-thumb {
                            background: #cbd5e1;
                            border-radius: 4px;
                        }
                        .kanban-scroll::-webkit-scrollbar-thumb:hover {
                            background: #94a3b8;
                        }
                    `}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg overflow-hidden",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",style:{height:"calc(100vh - 280px)",width:"100%"},children:L.map(s=>{const t=(d==null?void 0:d.filter(a=>{var n;return((n=a.bug_status)==null?void 0:n.id)===s.id}))||[];return e.jsx("div",{className:"flex-shrink-0",style:{minWidth:"calc(20% - 16px)",width:"calc(20% - 16px)"},onDrop:a=>{a.preventDefault(),a.currentTarget.classList.remove("bg-blue-50","border-blue-300");const n=a.dataTransfer.getData("bugId"),i=a.dataTransfer.getData("currentStatusId");n&&i!==s.id.toString()&&we(parseInt(n),s.id)},onDragOver:a=>{a.preventDefault(),a.currentTarget.classList.add("bg-blue-50","border-blue-300")},onDragLeave:a=>{a.currentTarget.classList.remove("bg-blue-50","border-blue-300")},children:e.jsxs("div",{className:"bg-gray-100 rounded-lg h-full flex flex-col",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:s.name}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:t.length})]})}),e.jsxs("div",{className:"p-2 space-y-2 overflow-y-auto flex-1",style:{maxHeight:"calc(100vh - 350px)"},children:[t.map(a=>{var n;return e.jsx("div",{draggable:!0,onDragStart:i=>{i.dataTransfer.setData("bugId",a.id.toString()),i.dataTransfer.setData("currentStatusId",s.id.toString()),i.currentTarget.classList.add("opacity-50","scale-95")},onDragEnd:i=>{i.currentTarget.classList.remove("opacity-50","scale-95")},className:"cursor-move transition-all duration-200",children:e.jsx(P,{className:"hover:shadow-md transition-all duration-200 border-l-4",style:{borderLeftColor:s.color},children:e.jsx(I,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[e.jsx(Ee,{className:"h-4 w-4 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm hover:text-red-600 transition-colors cursor-pointer break-words",onClick:i=>{i.stopPropagation(),N(a)},title:a.title,children:a.title}),a.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",title:a.description,children:a.description})]})]}),e.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:i=>{i.stopPropagation(),N(a)},className:"h-6 w-6 text-amber-500 hover:text-amber-700",children:e.jsx(W,{className:"h-3 w-3"})}),(l==null?void 0:l.delete)&&e.jsx(m,{variant:"ghost",size:"icon",onClick:i=>{i.stopPropagation(),$(a)},className:"h-6 w-6 text-red-500 hover:text-red-700",children:e.jsx(K,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(f,{className:O(a.priority),variant:"secondary",size:"sm",children:a.priority}),e.jsx(f,{className:G(a.severity),variant:"secondary",size:"sm",children:a.severity})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:(n=a.project)==null?void 0:n.title})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:a.assigned_to?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-xs",children:a.assigned_to.name.charAt(0).toUpperCase()})}),e.jsx("span",{className:"text-xs text-gray-700",children:a.assigned_to.name})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Ve,{className:"h-3 w-3 text-gray-400"})}),e.jsx("span",{className:"text-xs text-gray-500",children:"Unassigned"})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.comments_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ue,{className:"h-3 w-3"}),e.jsx("span",{children:a.comments_count})]}),a.attachments_count>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qe,{className:"h-3 w-3"}),e.jsx("span",{children:a.attachments_count})]})]})]})]})})})},a.id)}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(U,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:c("No bugs")})]})]})]})},s.id)})})})]}):x==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d==null?void 0:d.map(s=>{var t,a,n,i;return e.jsxs(P,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(Te,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Ae,{className:"text-base cursor-pointer hover:text-red-600 transition-colors break-words",onClick:()=>N(s),title:s.title,children:s.title}),e.jsx(U,{className:"h-4 w-4 text-red-500 flex-shrink-0"})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",title:s.description,children:s.description})]}),e.jsx(I,{className:"py-2",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{className:O(s.priority),variant:"secondary",children:s.priority}),e.jsx(f,{className:G(s.severity),variant:"secondary",children:s.severity})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx(f,{style:{backgroundColor:(t=s.bug_status)==null?void 0:t.color},className:"text-white",children:(a=s.bug_status)==null?void 0:a.name}),e.jsx("span",{className:"text-muted-foreground",children:(n=s.project)==null?void 0:n.title})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[s.assigned_to?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-6 w-6",children:e.jsx(oe,{className:"text-xs",children:(i=s.assigned_to.name)==null?void 0:i.charAt(0)})}),e.jsx("span",{className:"text-xs text-gray-600",children:s.assigned_to.name})]}):e.jsx("span",{className:"text-xs text-gray-500",children:"Unassigned"}),e.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[e.jsxs("div",{children:["Created: ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("div",{children:["Updated: ",new Date(s.updated_at||s.created_at).toLocaleDateString()]})]})]})]})}),e.jsxs(Be,{className:"flex justify-end gap-1 pt-0 pb-2",children:[(l==null?void 0:l.update)&&e.jsxs(M,{children:[e.jsx(E,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>N(s),className:"text-amber-500 hover:text-amber-700 h-8 w-8",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(V,{children:"Edit"})]}),(l==null?void 0:l.delete)&&e.jsxs(M,{children:[e.jsx(E,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>$(s),className:"text-red-500 hover:text-red-700 h-8 w-8",children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsx(V,{children:"Delete"})]})]})]},s.id)})}):e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bug"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d==null?void 0:d.map(s=>{var t,a,n,i;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-red-500 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-red-600 transition-colors",onClick:()=>N(s),children:s.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(f,{style:{backgroundColor:(t=s.bug_status)==null?void 0:t.color},className:"text-white",children:(a=s.bug_status)==null?void 0:a.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(f,{className:O(s.priority),variant:"secondary",children:s.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(f,{className:G(s.severity),variant:"secondary",children:s.severity})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(n=s.project)==null?void 0:n.title}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.assigned_to?e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"h-6 w-6 mr-2",children:e.jsx(oe,{className:"text-xs",children:(i=s.assigned_to.name)==null?void 0:i.charAt(0)})}),e.jsx("span",{className:"text-sm text-gray-900",children:s.assigned_to.name})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"Unassigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex gap-1",children:[(l==null?void 0:l.update)&&e.jsxs(M,{children:[e.jsx(E,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>N(s),className:"text-amber-500 hover:text-amber-700 h-8 w-8",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(V,{children:"Edit"})]}),(l==null?void 0:l.delete)&&e.jsxs(M,{children:[e.jsx(E,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>$(s),className:"text-red-500 hover:text-red-700 h-8 w-8",children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsx(V,{children:"Delete"})]})]})})]},s.id)})})]})})}),(!d||d.length===0)&&e.jsx(P,{className:"border-dashed border-2",children:e.jsxs(I,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(U,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c("No bugs found")}),e.jsx("p",{className:"text-gray-500 text-center mb-6",children:c("No bugs match your current filters. Try adjusting your search criteria.")}),(l==null?void 0:l.create)&&e.jsxs(m,{onClick:()=>N(),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),c("Report First Bug")]})]})}),x!=="kanban"&&!Array.isArray(r)&&(r==null?void 0:r.links)&&e.jsxs("div",{className:"mt-6 bg-white p-4 rounded-lg shadow flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-medium",children:(r==null?void 0:r.from)||0})," to ",e.jsx("span",{className:"font-medium",children:(r==null?void 0:r.to)||0})," of ",e.jsx("span",{className:"font-medium",children:(r==null?void 0:r.total)||0})," bugs"]}),e.jsx("div",{className:"flex gap-1",children:(ie=r==null?void 0:r.links)==null?void 0:ie.map((s,t)=>{const a=s.label==="&laquo; Previous"||s.label==="Next &raquo;",n=s.label.replace("&laquo; ","").replace(" &raquo;","");return e.jsx(m,{variant:s.active?"default":"outline",size:a?"sm":"icon",className:a?"px-3":"h-8 w-8",disabled:!s.url,onClick:()=>s.url&&C.get(s.url),children:a?n:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})},t)})})]}),pe&&e.jsx(De,{bug:je,projects:J,statuses:L,members:xe,onClose:()=>ae(!1),permissions:l}),e.jsx(Fe,{isOpen:ve,onClose:()=>{D(!1),F(null)},onConfirm:ye,itemName:(b==null?void 0:b.title)||"",entityName:"bug"})]})}export{Fs as default};
