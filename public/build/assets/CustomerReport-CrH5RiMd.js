import{r as N,j as e}from"./ui-Ps9nvBG1.js";import{u as Q,K as W,L as Z,C as l,a as i,b as c,S as ee,d as r,e as p,I as P,B as se,G as M,g as m}from"./app-BTt_gkO3.js";import{S as E,a as H,b as G,c as O,d as v}from"./select-z0EzYxFC.js";import{T as te,a as ae,b as n,c as x}from"./tabs-D83PhGuv.js";import{P as le}from"./page-template-BeQadk1c.js";import{f as u}from"./currency-kzm_C5pv.js";import{C as I}from"./circle-check-big-BMYVPbRH.js";import{U as b}from"./users-ClK0ij4u.js";import{T as V}from"./target-LDs0Bf_v.js";import{S as z}from"./sticky-note-BnqKoA0i.js";import{A as y}from"./activity-BmMDIvmq.js";import{D as U}from"./dollar-sign-CY6xo33T.js";import{C as K}from"./clock-NAV_RQL_.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./textarea-DPiv_-Qc.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./trending-up-BkxnV74k.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./credit-card-BwPrmecT.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";function Ue({projects:$,members:q}){var w,_,S,T,C,D,k,R,B,F,A,L;const{t:re}=Q(),{auth:g}=W().props;g!=null&&g.permissions;const[d,o]=N.useState({project_id:"",start_date:"",end_date:"",member_id:""}),[t,J]=N.useState(null),[h,f]=N.useState(!1),X=async()=>{var s;if(d.project_id){f(!0);try{const j=await(await fetch(route("customer-reports.generate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify(d)})).json();J(j)}catch(a){console.error("Failed to generate report:",a)}finally{f(!1)}}},Y=[{title:"Dashboard",href:route("dashboard")},{title:"Reports",href:route("timesheet-reports.index")},{title:"Customer Report"}];return e.jsxs(le,{title:"Customer Report",breadcrumbs:Y,children:[e.jsx(Z,{title:"Customer Report"}),e.jsxs(l,{className:"mb-6",children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"Report Filters"]})}),e.jsxs(r,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{children:["Project ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(E,{value:d.project_id,onValueChange:s=>o(a=>({...a,project_id:s})),children:[e.jsx(H,{children:e.jsx(G,{placeholder:"Select project"})}),e.jsx(O,{children:$.map(s=>e.jsx(v,{value:s.id.toString(),children:s.title},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Start Date"}),e.jsx(P,{type:"date",value:d.start_date,onChange:s=>o(a=>({...a,start_date:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"End Date"}),e.jsx(P,{type:"date",value:d.end_date,onChange:s=>o(a=>({...a,end_date:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Team Member"}),e.jsxs(E,{value:d.member_id,onValueChange:s=>o(a=>({...a,member_id:s})),children:[e.jsx(H,{children:e.jsx(G,{placeholder:"All members"})}),e.jsxs(O,{children:[e.jsx(v,{value:"",children:"All Members"}),q.map(s=>e.jsx(v,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(se,{onClick:X,disabled:h||!d.project_id,className:"w-full md:w-auto",children:h?"Generating...":"Generate Report"})})]})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Project Overview"]})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:t.project.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.project.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsx(m,{variant:t.project.status==="completed"?"default":"secondary",children:t.project.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Priority:"}),e.jsx(m,{variant:"outline",children:t.project.priority})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Progress:"}),e.jsxs("span",{className:"font-medium",children:[t.project.progress,"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Timeline"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"text-sm",children:t.project.start_date||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Deadline:"}),e.jsx("span",{className:"text-sm",children:t.project.deadline||"Not set"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Hours:"}),e.jsxs("span",{className:"text-sm",children:[t.project.estimated_hours||0,"h"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t.summary.timesheet.total_hours.toFixed(1),"h"]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Total Hours"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[t.summary.tasks.completed_tasks,"/",t.summary.tasks.total_tasks]}),e.jsx("div",{className:"text-xs text-green-600",children:"Tasks Done"})]})]})]})]})})]}),e.jsxs(te,{defaultValue:"tasks",className:"w-full",children:[e.jsxs(ae,{className:"grid w-full grid-cols-7",children:[e.jsx(n,{value:"tasks",children:"Tasks"}),e.jsx(n,{value:"team",children:"Team"}),e.jsx(n,{value:"milestones",children:"Milestones"}),e.jsx(n,{value:"notes",children:"Notes"}),e.jsx(n,{value:"activity",children:"Activity"}),e.jsx(n,{value:"budget",children:"Budget"}),e.jsx(n,{value:"timesheet",children:"Timesheet"})]}),e.jsx(x,{value:"tasks",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-5 w-5"}),"Tasks (",((w=t.project.tasks)==null?void 0:w.length)||0,")"]})}),e.jsx(r,{children:((_=t.project.tasks)==null?void 0:_.length)>0?e.jsx("div",{className:"space-y-3",children:t.project.tasks.map(s=>{var a,j;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx(m,{variant:((a=s.stage)==null?void 0:a.name)==="Done"?"default":"secondary",children:((j=s.stage)==null?void 0:j.name)||"No Stage"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Priority: ",s.priority]}),e.jsxs("span",{children:["Due: ",s.due_date||"Not set"]})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(I,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No tasks found"})]})})]})}),e.jsx(x,{value:"team",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Team Members (",((S=t.project.users)==null?void 0:S.length)||0,")"]})}),e.jsx(r,{children:((T=t.project.users)==null?void 0:T.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.project.users.map(s=>{var a;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:((a=s.pivot)==null?void 0:a.role)||"Member"})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No team members assigned"})]})})]})}),e.jsx(x,{value:"milestones",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Milestones (",((C=t.project.milestones)==null?void 0:C.length)||0,")"]})}),e.jsx(r,{children:((D=t.project.milestones)==null?void 0:D.length)>0?e.jsx("div",{className:"space-y-4",children:t.project.milestones.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx(m,{variant:s.status==="completed"?"default":"secondary",children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:["Due: ",s.due_date||"Not set"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.progress}%`}})}),e.jsxs("span",{className:"text-sm",children:[s.progress,"%"]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(V,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No milestones found"})]})})]})}),e.jsx(x,{value:"notes",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Notes (",((k=t.project.notes)==null?void 0:k.length)||0,")"]})}),e.jsx(r,{children:((R=t.project.notes)==null?void 0:R.length)>0?e.jsx("div",{className:"space-y-4",children:t.project.notes.map(s=>{var a;return e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),s.is_pinned&&e.jsx(m,{variant:"outline",children:"Pinned"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.content}),e.jsxs("div",{className:"text-xs text-gray-500",children:["By ",(a=s.creator)==null?void 0:a.name," • ",new Date(s.created_at).toLocaleDateString()]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No notes found"})]})})]})}),e.jsx(x,{value:"activity",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Recent Activity (",((B=t.project.activities)==null?void 0:B.length)||0,")"]})}),e.jsx(r,{children:((F=t.project.activities)==null?void 0:F.length)>0?e.jsx("div",{className:"space-y-3",children:t.project.activities.map(s=>{var a;return e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(a=s.user)==null?void 0:a.name," • ",new Date(s.created_at).toLocaleString()]})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent activity"})]})})]})}),e.jsx(x,{value:"budget",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Budget Overview"]})}),e.jsx(r,{children:t.summary.budget?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u(t.summary.budget.total_budget)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Total Budget"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:u(t.summary.budget.total_spent)}),e.jsx("div",{className:"text-sm text-red-600",children:"Total Spent"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:u(t.summary.budget.remaining)}),e.jsx("div",{className:"text-sm text-green-600",children:"Remaining"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Budget Utilization"}),e.jsxs("span",{className:"text-sm",children:[t.summary.budget.utilization.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:`${Math.min(t.summary.budget.utilization,100)}%`}})})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No budget information available"})]})})]})}),e.jsx(x,{value:"timesheet",children:e.jsxs(l,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Timesheet Entries (",((A=t.project.timesheet_entries)==null?void 0:A.length)||0,")"]})}),e.jsx(r,{children:((L=t.project.timesheet_entries)==null?void 0:L.length)>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t.summary.timesheet.total_hours.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Total Hours"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[t.summary.timesheet.billable_hours.toFixed(1),"h"]}),e.jsx("div",{className:"text-sm text-green-600",children:"Billable Hours"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u(t.summary.timesheet.total_amount)}),e.jsx("div",{className:"text-sm text-purple-600",children:"Total Amount"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Billable"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.project.timesheet_entries.map(s=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(a=s.user)==null?void 0:a.name}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[parseFloat(s.hours).toFixed(1),"h"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(m,{variant:s.is_billable?"default":"secondary",children:s.is_billable?"Yes":"No"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.description||"-"})]},s.id)})})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No timesheet entries found"})]})})]})})]})]}),!t&&!h&&e.jsx(l,{children:e.jsxs(r,{className:"p-8 text-center",children:[e.jsx(M,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Select a project and generate report to view comprehensive details"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"All project data including tasks, team, milestones, notes, activity, budget, and timesheet will be displayed"})]})}),h&&e.jsx(l,{children:e.jsxs(r,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Generating comprehensive report..."})]})})]})}export{Ue as default};
