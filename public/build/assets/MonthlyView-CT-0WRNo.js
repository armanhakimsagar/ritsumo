import{r as b,j as e}from"./ui-Ps9nvBG1.js";import{u as I,K as L,L as O,C as l,a as m,B as a,b as x,g as H,S as y,I as A,e as D,d as n,h as R,P as U,f as w}from"./app-BTt_gkO3.js";import{P as V,f as W}from"./page-template-BeQadk1c.js";import{T as Y}from"./TimeEntryForm-Bcc_Wmjo.js";import{C as K}from"./chevron-left-BAvb6WGn.js";import{F as q}from"./filter-C99mLYzj.js";import{C as G}from"./clock-NAV_RQL_.js";import{C as _}from"./calendar-pZCS8WPy.js";import{T as J}from"./trending-up-BkxnV74k.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./textarea-DPiv_-Qc.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./dropdown-menu-CvJwe1WI.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";import"./checkbox-ux8-2I9a.js";function Ee({monthData:r,projectBreakdown:h,weeklyBreakdown:u,projects:C,currentMonth:F,timesheetId:S,permissions:Q}){const{t}=I(),{auth:d}=L().props,M=(d==null?void 0:d.permissions)||[],[o,j]=b.useState(new Date(F)),[k,p]=b.useState(!1),g=s=>{const i=new Date(o);i.setMonth(i.getMonth()+(s==="next"?1:-1)),j(i);const c=i.toISOString().slice(0,7);w.get(route("timesheets.monthly-view"),{month:c},{preserveState:!0})},T=()=>{const s=new Date;j(s);const i=s.toISOString().slice(0,7);w.get(route("timesheets.monthly-view"),{month:i},{preserveState:!0})},N=()=>o.toLocaleDateString("en-US",{year:"numeric",month:"long"}),f=()=>{const s=new Date;return o.getMonth()===s.getMonth()&&o.getFullYear()===s.getFullYear()},P=()=>r.working_days>0?(r.total_hours/r.working_days).toFixed(1):"0.0",B=()=>r.total_hours>0?(r.billable_hours/r.total_hours*100).toFixed(0):"0",z=(s,i)=>{const c=new Date(s),v=new Date(i);return`${c.getDate()}/${c.getMonth()+1} - ${v.getDate()}/${v.getMonth()+1}`},E=[],$=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Timesheets"),href:route("timesheets.index")},{title:t("Monthly View")}];return e.jsxs(V,{title:t("Monthly Time Summary"),actions:E,breadcrumbs:$,children:[e.jsx(O,{title:`Monthly View - ${N()}`}),e.jsx(l,{className:"mb-6",children:e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{variant:"outline",size:"icon",onClick:()=>g("prev"),children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx("div",{className:"text-center",children:e.jsxs(x,{className:"text-xl",children:[N(),f()&&e.jsx(H,{className:"ml-2",children:t("Current Month")})]})}),e.jsx(a,{variant:"outline",size:"icon",onClick:()=>g("next"),children:e.jsx(W,{className:"h-4 w-4"})})]}),!f()&&e.jsx(a,{variant:"outline",onClick:T,children:t("Current Month")})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("form",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(y,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:t("Search projects..."),className:"w-full pl-9"})]}),e.jsxs(a,{type:"submit",size:"sm",children:[e.jsx(y,{className:"h-4 w-4 mr-1.5"}),t("Search")]})]}),e.jsx("div",{className:"ml-2",children:e.jsxs(a,{variant:"outline",size:"sm",className:"h-8 px-2 py-1",children:[e.jsx(q,{className:"h-3.5 w-3.5 mr-1.5"}),t("Filters")]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{className:"text-xs text-muted-foreground",children:[t("Export"),":"]}),e.jsx(a,{variant:"outline",size:"sm",children:t("PDF")})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(l,{children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:t("Total Hours")})]}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[r.total_hours.toFixed(1),"h"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[P(),"h avg/day"]})]})}),e.jsx(l,{children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:t("Billable Hours")})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[r.billable_hours.toFixed(1),"h"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[B(),"% of total"]})]})}),e.jsx(l,{children:e.jsxs(n,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-600",children:t("Entries")})]}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:r.entries_count}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.working_days," working days"]})]})}),e.jsx(l,{children:e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium text-orange-600",children:t("Utilization")})}),e.jsxs("div",{className:"text-2xl font-bold text-orange-900",children:[(r.total_hours/(r.working_days*8)*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Based on 8h/day"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(x,{children:t("Project Breakdown")})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[h.map((s,i)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s.project_name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.total_hours.toFixed(1),"h (",s.percentage.toFixed(0),"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Billable: ",s.billable_hours.toFixed(1),"h"]}),e.jsxs("span",{children:["Non-billable: ",(s.total_hours-s.billable_hours).toFixed(1),"h"]})]})]},i)),h.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No project data available"})]})})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsx(x,{children:t("Weekly Breakdown")})}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-3",children:[u.map((s,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["Week ",z(s.week_start,s.week_end)]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.entries_count," entries"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-600",children:[s.total_hours.toFixed(1),"h"]}),e.jsxs("div",{className:"text-sm text-green-600",children:[s.billable_hours.toFixed(1),"h billable"]})]})]},i)),u.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No weekly data available"})]})})]})]}),r.entries_count===0&&e.jsx(l,{className:"mt-6",children:e.jsxs(n,{className:"p-8 text-center",children:[e.jsx(_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:t("No time entries this month")}),e.jsx("p",{className:"text-gray-500 mb-4",children:t("Start tracking your time to see your monthly summary")}),R(M,"timesheet_create")&&e.jsxs(a,{onClick:()=>p(!0),children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("Add Time Entry")]})]})}),e.jsx(Y,{isOpen:k,onClose:()=>p(!1),timesheetId:S,projects:C})]})}export{Ee as default};
