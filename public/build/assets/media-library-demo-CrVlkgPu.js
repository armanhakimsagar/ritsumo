import{r as i,j as e}from"./ui-Ps9nvBG1.js";import{P as he}from"./page-template-BeQadk1c.js";import{u as pe,K as fe,am as n,P as _,C as H,d as W,S as ge,I as K,F as v,G as S,B as x,X as je,g as $,D as G,l as V,n as J,o as Q,ah as Y}from"./app-BTt_gkO3.js";import{D as Ne,a as be,b as ve,c as w,d as we}from"./dropdown-menu-CvJwe1WI.js";import{H as Z}from"./hard-drive-DkZiK8kb.js";import{A as ee}from"./archive-B7y_TeQV.js";import{E as ye}from"./ellipsis-DhhTm3i6.js";import{I as se}from"./info-CWa1AAnn.js";import{C as E}from"./trending-up-BkxnV74k.js";import{D as ae}from"./download-FY3rJJBK.js";import{C as Ce}from"./calendar-pZCS8WPy.js";import{F as De}from"./file-3AWHN2l6.js";import"./vendor-B1hewrmX.js";import"./textarea-DPiv_-Qc.js";import"./select-z0EzYxFC.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";import"./react-country-flag.esm-2v5ikZ5v.js";import"./language-BbwPiY59.js";import"./loader-circle-LF6za7Wc.js";import"./language-switcher-AzCP_3T2.js";import"./switch-DG4amuEJ.js";import"./globe-BYIVGjA8.js";import"./building-2-CVOsE0mA.js";import"./square-check-big-B29hCoNu.js";import"./bug-DP5pb0Nw.js";import"./clock-NAV_RQL_.js";import"./credit-card-BwPrmecT.js";import"./dollar-sign-CY6xo33T.js";import"./mail-CZ8KgBhk.js";import"./message-square-DGoN5Yg5.js";import"./settings-CG31wyPI.js";import"./user-DZ3jVi18.js";import"./triangle-alert-BuDHDWvi.js";import"./use-favicon-vjALIuby.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";function cs(){var q;const{t:a}=pe(),{csrf_token:L}=fe().props,[I,y]=i.useState([]),[d,U]=i.useState([]),[te,z]=i.useState(!1),[c,re]=i.useState(""),[u,g]=i.useState(1),[le,j]=i.useState(!1),[P,C]=i.useState(!1),[p,D]=i.useState(!1),[ie,T]=i.useState(!1),[l,ne]=i.useState(null),N=12,R=i.useCallback(async()=>{z(!0);try{const s=await fetch(route("api.media.index"),{credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();y(t),U(t)}catch(s){console.error("Failed to load media:",s),n.error("Failed to load media")}finally{z(!1)}},[]);i.useEffect(()=>{R()},[R]),i.useEffect(()=>{const s=I.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())||t.file_name.toLowerCase().includes(c.toLowerCase()));U(s),g(1)},[c,I]);const O=async s=>{C(!0);const t=Array.from(s);if(t.length===0){C(!1);return}const r=new FormData;t.forEach(o=>{r.append("files[]",o)});try{const o=await fetch(route("api.media.batch"),{method:"POST",body:r,credentials:"same-origin",headers:{"X-CSRF-TOKEN":L,"X-Requested-With":"XMLHttpRequest"}}),m=await o.json();o.ok?(y(f=>[...m.data,...f]),n.success(m.message),m.errors&&m.errors.length>0&&m.errors.forEach(f=>{n.error(f)})):m.errors&&m.errors.length>0?m.errors.forEach(f=>{n.error(f)}):n.error(m.message||"Failed to upload files")}catch{n.error("Error uploading files")}C(!1),j(!1)},M=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?D(!0):s.type==="dragleave"&&D(!1)},oe=s=>{s.preventDefault(),s.stopPropagation(),D(!1),s.dataTransfer.files&&s.dataTransfer.files[0]&&O(s.dataTransfer.files)},de=async s=>{try{(await fetch(route("api.media.destroy",s),{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-TOKEN":L,"X-Requested-With":"XMLHttpRequest"}})).ok?(y(r=>r.filter(o=>o.id!==s)),n.success("Media deleted successfully")):n.error("Failed to delete media")}catch{n.error("Error deleting media")}},k=s=>{navigator.clipboard.writeText(s),n.success("File URL copied to clipboard")},A=(s,t)=>{const r=document.createElement("a");r.href=route("api.media.download",s),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),n.success("Download started")},ce=s=>{ne(s),T(!0)},F=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,o)).toFixed(2))+" "+r[o]},me=s=>new Date(s).toLocaleString(),B=s=>s.startsWith("image/")?e.jsx(v,{className:"h-8 w-8 text-blue-500"}):s.includes("pdf")?e.jsx(S,{className:"h-8 w-8 text-red-500"}):s.includes("document")||s.includes("word")||s.includes("text")?e.jsx(S,{className:"h-8 w-8 text-blue-600"}):s.includes("zip")||s.includes("rar")||s.includes("archive")?e.jsx(ee,{className:"h-8 w-8 text-orange-500"}):e.jsx(De,{className:"h-8 w-8 text-gray-500"}),h=Math.ceil(d.length/N),b=(u-1)*N,X=d.slice(b,b+N),xe=[{title:a("Dashboard"),href:route("dashboard")},{title:"Media Library"}],ue=[{label:a("Upload Media"),icon:e.jsx(_,{className:"h-4 w-4"}),variant:"default",onClick:()=>j(!0)}];return e.jsx(he,{title:a("Media Library"),url:"/media-library",breadcrumbs:xe,actions:ue,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{children:e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(K,{placeholder:a("Search media files..."),value:c,onChange:s=>re(s.target.value),className:"pl-10"})]}),c&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a('Showing results for "{{term}}"',{term:c})})]}),e.jsxs("div",{className:"flex gap-6 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-md",children:e.jsx(v,{className:"h-4 w-4 text-primary"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.length," ",a("Files")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-green-500/10 rounded-md",children:e.jsx(Z,{className:"h-4 w-4 text-green-600"})}),e.jsx("span",{className:"text-sm font-semibold",children:F(d.reduce((s,t)=>s+t.size,0))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-md",children:e.jsx(v,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.filter(s=>s.mime_type.startsWith("image/")).length," ",a("Images")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-purple-500/10 rounded-md",children:e.jsx(S,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.filter(s=>s.mime_type.includes("pdf")||s.mime_type.includes("document")||s.mime_type.includes("word")||s.mime_type.includes("text")).length," ",a("Documents")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-orange-500/10 rounded-md",children:e.jsx(ee,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[d.filter(s=>s.mime_type.includes("zip")||s.mime_type.includes("rar")||s.mime_type.includes("archive")).length," ",a("Archives")]})]})]})]})})}),e.jsx(H,{children:e.jsx(W,{className:"p-6",children:te?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:a("Loading media...")})]}):X.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(v,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a("No media files found")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:c?a('No results found for "{{term}}"',{term:c}):a("Get started by uploading your first media file")}),!c&&e.jsxs(x,{onClick:()=>j(!0),size:"lg",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),a("Upload Media")]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:X.map(s=>{var t;return e.jsxs("div",{className:"group relative bg-card border rounded-lg overflow-hidden hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"relative aspect-square bg-muted flex items-center justify-center",children:[s.mime_type.startsWith("image/")?e.jsx("img",{src:s.thumb_url,alt:s.name,className:"w-full h-full object-cover",onError:r=>{r.currentTarget.src=s.url}}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[B(s.mime_type),e.jsx("span",{className:"text-xs text-muted-foreground mt-2 text-center truncate w-full",children:(t=s.file_name.split(".").pop())==null?void 0:t.toUpperCase()})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-200"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(Ne,{children:[e.jsx(be,{asChild:!0,children:e.jsx(x,{size:"sm",variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8 p-0 bg-background/95 hover:bg-background shadow-md",children:e.jsx(ye,{className:"h-4 w-4"})})}),e.jsxs(ve,{align:"end",className:"w-40",children:[e.jsxs(w,{onClick:()=>ce(s),children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),a("View Info")]}),e.jsxs(w,{onClick:()=>k(s.url),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a("Copy Link")]}),e.jsxs(w,{onClick:()=>A(s.id,s.file_name),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),a("Download")]}),e.jsx(we,{}),e.jsxs(w,{onClick:()=>de(s.id),className:"text-destructive focus:text-destructive",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),a("Delete")]})]})]})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx($,{variant:"secondary",className:"text-xs bg-background/95",children:s.mime_type.split("/")[1].toUpperCase()})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium truncate",title:s.name,children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(Z,{className:"h-3 w-3"}),F(s.size)]})]}),e.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"h-3 w-3"}),new Date(s.created_at).toLocaleDateString()]})})]})]},s.id)})}),h>1&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-6 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[a("Showing")," ",e.jsx("span",{className:"font-semibold",children:b+1})," ",a("to")," ",e.jsx("span",{className:"font-semibold",children:Math.min(b+N,d.length)})," ",a("of")," ",e.jsx("span",{className:"font-semibold",children:d.length})," ",a("files")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",disabled:u===1,onClick:()=>g(s=>Math.max(s-1,1)),children:a("Previous")}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(h,5)},(s,t)=>{let r;return h<=5||u<=3?r=t+1:u>=h-2?r=h-4+t:r=u-2+t,e.jsx(x,{variant:u===r?"default":"outline",size:"sm",className:"w-10 h-8",onClick:()=>g(r),children:r},r)})}),e.jsx(x,{variant:"outline",size:"sm",disabled:u===h,onClick:()=>g(s=>Math.min(s+1,h)),children:a("Next")})]})]})]})})}),e.jsx(G,{open:le,onOpenChange:j,children:e.jsxs(V,{className:"max-w-lg",children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),a("Upload Media Files")]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:`relative border-2 border-dashed rounded-xl p-12 text-center transition-all duration-200 ${p?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}`,onDragEnter:M,onDragLeave:M,onDragOver:M,onDrop:oe,children:[e.jsxs("div",{className:`transition-all duration-200 ${p?"scale-110":""}`,children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Y,{className:`h-8 w-8 transition-colors ${p?"text-blue-500":"text-gray-400"}`})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:a(p?"Drop files here":"Upload your files")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:a("Drag and drop your files here, or click to browse")}),e.jsx(K,{type:"file",multiple:!0,onChange:s=>s.target.files&&O(s.target.files),className:"hidden",id:"file-upload-modal"}),e.jsx(x,{type:"button",onClick:()=>{var s;return(s=document.getElementById("file-upload-modal"))==null?void 0:s.click()},disabled:P,size:"lg",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),a("Uploading...")]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),a("Choose Files")]})})]}),p&&e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-xl"})]})})]})}),e.jsx(G,{open:ie,onOpenChange:T,children:e.jsxs(V,{className:"max-w-lg",children:[e.jsx(J,{children:e.jsxs(Q,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),a("Media Information")]})}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center bg-gray-50 rounded-lg p-4",children:l.mime_type.startsWith("image/")?e.jsx("img",{src:l.thumb_url,alt:l.name,className:"max-w-full h-48 object-contain rounded-md shadow-sm",onError:s=>{s.currentTarget.src=l.url}}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[B(l.mime_type),e.jsxs("span",{className:"text-sm text-muted-foreground mt-3",children:[(q=l.file_name.split(".").pop())==null?void 0:q.toUpperCase()," File"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("File Name")}),e.jsx("span",{className:"text-sm text-right max-w-xs truncate",title:l.file_name,children:l.file_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("File Type")}),e.jsx($,{variant:"secondary",children:l.mime_type})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("File Size")}),e.jsx("span",{className:"text-sm",children:F(l.size)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:a("Uploaded")}),e.jsx("span",{className:"text-sm",children:me(l.created_at)})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground block mb-2",children:a("URL")}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[e.jsx("code",{className:"text-xs text-muted-foreground flex-1 truncate",children:l.url}),e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>k(l.url),className:"h-6 w-6 p-0",children:e.jsx(E,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>k(l.url),className:"flex-1",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),a("Copy Link")]}),e.jsxs(x,{variant:"outline",onClick:()=>A(l.id,l.file_name),className:"flex-1",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),a("Download")]})]})]})]})})]})})}export{cs as default};
