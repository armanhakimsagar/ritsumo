import{r as v,j as e}from"./ui-Ps9nvBG1.js";import{u as V,K as A,al as R,C as z,a as O,d as H,I as K,B as h,e as d,g as L,T as p,i as f,j as y,k as S,R as N,r as U,t as m,f as W}from"./app-BTt_gkO3.js";import{S as C,a as w,b as F,c as P,d as l}from"./select-z0EzYxFC.js";import{S as $}from"./switch-DG4amuEJ.js";import{D as _}from"./dollar-sign-CY6xo33T.js";import{I as g}from"./info-CWa1AAnn.js";import"./vendor-B1hewrmX.js";/* empty css            *//* empty css                  */import"./utils-DVuJ_tgg.js";import"./index-C9qibMqK.js";import"./chevron-up-CaRG6751.js";function ce(){const{t:s}=V(),{currencies:n=[],systemSettings:o={}}=A().props,[a,b]=v.useState({decimalFormat:o.decimalFormat||"2",defaultCurrency:o.defaultCurrency||"USD",decimalSeparator:o.decimalSeparator||".",thousandsSeparator:o.thousandsSeparator||",",floatNumber:o.floatNumber!=="0",currencySymbolSpace:o.currencySymbolSpace==="1",currencySymbolPosition:o.currencySymbolPosition||"before",currencyName:""}),[D,k]=v.useState(1234.56);v.useEffect(()=>{if(n&&n.length>0){const r=n.find(t=>t.code===a.defaultCurrency);r&&b(t=>({...t,currencyName:r.name}))}},[n,a.defaultCurrency]);const i=(r,t)=>{b(c=>({...c,[r]:t}))},I=r=>{const t=n.find(c=>c.code===r);b(c=>({...c,defaultCurrency:r,currencyName:(t==null?void 0:t.name)||r}))},B=()=>{try{let r=D;const t=parseInt(a.decimalFormat);a.floatNumber||(r=Math.floor(r));const c=r.toFixed(t).split(".");a.thousandsSeparator!=="none"&&(c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,a.thousandsSeparator));let x=c.join(a.decimalSeparator);const u=n.find(M=>M.code===a.defaultCurrency),j=(u==null?void 0:u.symbol)||"$",T=a.currencySymbolSpace?" ":"";return a.currencySymbolPosition==="before"?`${j}${T}${x}`:`${x}${T}${j}`}catch{return s("Invalid format")}},E=r=>{r.preventDefault(),m.loading(s("Saving currency settings...")),W.post(route("settings.currency.update"),a,{preserveScroll:!0,onSuccess:t=>{var u,j;m.dismiss();const c=(u=t.props.flash)==null?void 0:u.success,x=(j=t.props.flash)==null?void 0:j.error;c?m.success(c):x?m.error(x):m.success(s("Currency settings updated successfully"))},onError:t=>{m.dismiss();const c=t.error||Object.values(t).join(", ")||s("Failed to update currency settings");m.error(c)}})};return e.jsx(R,{title:s("Currency Settings"),description:s("Configure how currency values are displayed throughout the application"),action:e.jsxs(h,{type:"submit",form:"currency-settings-form",size:"sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),s("Save Changes")]}),children:e.jsx("form",{id:"currency-settings-form",onSubmit:E,children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx("div",{children:e.jsxs(z,{children:[e.jsx(O,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-medium",children:s("Format Options")})]})})}),e.jsx(H,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-md border flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start mb-3 md:mb-0",children:[e.jsx("div",{className:"text-2xl font-semibold mb-1",children:B()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.currencyName," (",a.defaultCurrency,")"]})]}),e.jsx("div",{className:"w-full md:w-auto md:max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{type:"number",className:"text-right h-8 text-sm",value:D,onChange:r=>k(parseFloat(r.target.value)||0),placeholder:s("Test amount")}),e.jsx(h,{variant:"outline",onClick:()=>k(1234.56),type:"button",size:"sm",className:"h-8 text-xs",children:s("Reset")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"defaultCurrency",className:"font-medium",children:s("Default Currency")}),e.jsx(L,{variant:"outline",className:"font-mono",children:a.defaultCurrency})]}),e.jsxs(C,{value:a.defaultCurrency,onValueChange:I,children:[e.jsx(w,{children:e.jsx(F,{placeholder:s("Select currency")})}),e.jsx(P,{children:e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:n&&n.length>0?n.map(r=>e.jsx(l,{value:r.code,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 text-center",children:r.symbol}),e.jsxs("span",{children:[r.code," - ",r.name]}),r.is_default&&e.jsxs("span",{className:"ml-2 text-xs text-primary",children:["(",s("Default"),")"]})]})},r.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:s("No currencies found")})})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"decimalFormat",className:"font-medium",children:s("Decimal Places")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:s("Number of digits after decimal point")})})]})})]}),e.jsxs(C,{value:a.decimalFormat,onValueChange:r=>i("decimalFormat",r),children:[e.jsx(w,{children:e.jsx(F,{placeholder:s("Select decimal format")})}),e.jsxs(P,{children:[e.jsx(l,{value:"0",children:s("0 (e.g., 1234)")}),e.jsx(l,{value:"1",children:s("1 (e.g., 1234.5)")}),e.jsx(l,{value:"2",children:s("2 (e.g., 1234.56)")}),e.jsx(l,{value:"3",children:s("3 (e.g., 1234.567)")}),e.jsx(l,{value:"4",children:s("4 (e.g., 1234.5678)")})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"currencySymbolPosition",className:"font-medium",children:s("Symbol Position")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:s("Where to place the currency symbol")})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(h,{type:"button",variant:a.currencySymbolPosition==="before"?"default":"outline",className:"justify-center",onClick:()=>i("currencySymbolPosition","before"),children:[e.jsx("span",{className:"mr-2",children:"$"}),"100",a.currencySymbolPosition==="before"&&e.jsx(N,{className:"h-4 w-4 ml-2"})]}),e.jsxs(h,{type:"button",variant:a.currencySymbolPosition==="after"?"default":"outline",className:"justify-center",onClick:()=>i("currencySymbolPosition","after"),children:["100",e.jsx("span",{className:"ml-2",children:"$"}),a.currencySymbolPosition==="after"&&e.jsx(N,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"decimalSeparator",className:"font-medium",children:s("Decimal Separator")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:s("Character used to separate decimal places")})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(h,{type:"button",variant:a.decimalSeparator==="."?"default":"outline",className:"justify-center",onClick:()=>i("decimalSeparator","."),children:[s("Dot")," (123.45)",a.decimalSeparator==="."&&e.jsx(N,{className:"h-4 w-4 ml-2"})]}),e.jsxs(h,{type:"button",variant:a.decimalSeparator===","?"default":"outline",className:"justify-center",onClick:()=>i("decimalSeparator",","),children:[s("Comma")," (123,45)",a.decimalSeparator===","&&e.jsx(N,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"thousandsSeparator",className:"font-medium",children:s("Thousands Separator")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(S,{children:e.jsx("p",{children:s("Character used to group thousands")})})]})})]}),e.jsxs(C,{value:a.thousandsSeparator,onValueChange:r=>i("thousandsSeparator",r),children:[e.jsx(w,{children:e.jsx(F,{placeholder:s("Select thousands separator")})}),e.jsxs(P,{children:[e.jsx(l,{value:",",children:s("Comma (1,234.56)")}),e.jsx(l,{value:".",children:s("Dot (1.234,56)")}),e.jsx(l,{value:" ",children:s("Space (1 234.56)")}),e.jsx(l,{value:"none",children:s("None (123456.78)")})]})]})]}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"floatNumber",className:"font-medium",children:s("Show Decimals")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("Display decimal places in amounts")})]}),e.jsx($,{id:"floatNumber",checked:a.floatNumber,onCheckedChange:r=>i("floatNumber",r)})]})}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"currencySymbolSpace",className:"font-medium",children:s("Add Space")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("Space between amount and symbol")})]}),e.jsx($,{id:"currencySymbolSpace",checked:a.currencySymbolSpace,onCheckedChange:r=>i("currencySymbolSpace",r)})]})})]})]})})]})})})})})}export{ce as default};
